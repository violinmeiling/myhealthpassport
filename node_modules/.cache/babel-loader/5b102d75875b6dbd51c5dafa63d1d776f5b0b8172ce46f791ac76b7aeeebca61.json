{"ast":null,"code":"import React, { useContext, useCallback, useState, useRef, useEffect, useReducer } from 'react';\n\n/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g, decodeURIComponent);\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init(converter, defaultAttributes) {\n  function set(name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return;\n    }\n    attributes = assign({}, defaultAttributes, attributes);\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n    name = encodeURIComponent(name).replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent).replace(/[()]/g, escape);\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue;\n      }\n      stringifiedAttributes += '; ' + attributeName;\n      if (attributes[attributeName] === true) {\n        continue;\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n    return document.cookie = name + '=' + converter.write(value, name) + stringifiedAttributes;\n  }\n  function get(name) {\n    if (typeof document === 'undefined' || arguments.length && !name) {\n      return;\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n        if (name === found) {\n          break;\n        }\n      } catch (e) {}\n    }\n    return name ? jar[name] : jar;\n  }\n  return Object.create({\n    set,\n    get,\n    remove: function (name, attributes) {\n      set(name, '', assign({}, attributes, {\n        expires: -1\n      }));\n    },\n    withAttributes: function (attributes) {\n      return init(this.converter, assign({}, this.attributes, attributes));\n    },\n    withConverter: function (converter) {\n      return init(assign({}, this.converter, converter), this.attributes);\n    }\n  }, {\n    attributes: {\n      value: Object.freeze(defaultAttributes)\n    },\n    converter: {\n      value: Object.freeze(converter)\n    }\n  });\n}\ninit(defaultConverter, {\n  path: '/'\n});\nlet OrgRoleStructure = /*#__PURE__*/function (OrgRoleStructure) {\n  OrgRoleStructure[\"SingleRole\"] = \"single_role_in_hierarchy\";\n  OrgRoleStructure[\"MultiRole\"] = \"multi_role\";\n  return OrgRoleStructure;\n}({});\nfunction getAccessHelper$1(orgIdToOrgMemberInfo) {\n  function isRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    if (orgMemberInfo.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return orgMemberInfo.userAssignedRole === role || orgMemberInfo.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return orgMemberInfo.userAssignedRole === role;\n    }\n  }\n  function isAtLeastRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    if (orgMemberInfo.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return orgMemberInfo.userAssignedRole === role || orgMemberInfo.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return orgMemberInfo.userInheritedRolesPlusCurrentRole.includes(role);\n    }\n  }\n  function hasPermission(orgId, permission) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return orgMemberInfo.userPermissions.includes(permission);\n  }\n  function hasAllPermissions(orgId, permissions) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return permissions.every(permission => orgMemberInfo.userPermissions.includes(permission));\n  }\n  function getAccessHelperWithOrgId(orgId) {\n    return {\n      isRole(role) {\n        return isRole(orgId, role);\n      },\n      isAtLeastRole(role) {\n        return isAtLeastRole(orgId, role);\n      },\n      hasPermission(permission) {\n        return hasPermission(orgId, permission);\n      },\n      hasAllPermissions(permissions) {\n        return hasAllPermissions(orgId, permissions);\n      }\n    };\n  }\n  return {\n    isRole,\n    isAtLeastRole,\n    hasPermission,\n    hasAllPermissions,\n    getAccessHelperWithOrgId\n  };\n}\nfunction getOrgHelper$1(orgIdToOrgMemberInfo) {\n  return {\n    getOrg(orgId) {\n      if (orgIdToOrgMemberInfo.hasOwnProperty(orgId)) {\n        return orgIdToOrgMemberInfo[orgId];\n      } else {\n        return undefined;\n      }\n    },\n    getOrgIds() {\n      return Object.keys(orgIdToOrgMemberInfo);\n    },\n    getOrgs() {\n      return Object.values(orgIdToOrgMemberInfo);\n    },\n    getOrgByName(orgName) {\n      for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n        if (orgMemberInfo.orgName === orgName || orgMemberInfo.urlSafeOrgName === orgName) {\n          return orgMemberInfo;\n        }\n      }\n      return undefined;\n    }\n  };\n}\nclass UserClass {\n  // Metadata about the user\n\n  // If you used our migration APIs to migrate this user from a different system,\n  // this is their original ID from that system.\n\n  constructor(userFields, orgIdToUserOrgInfo) {\n    this.userId = userFields.userId;\n    this.orgIdToUserOrgInfo = orgIdToUserOrgInfo;\n    this.email = userFields.email;\n    this.firstName = userFields.firstName;\n    this.lastName = userFields.lastName;\n    this.username = userFields.username;\n    this.createdAt = userFields.createdAt;\n    this.pictureUrl = userFields.pictureUrl;\n    this.hasPassword = userFields.hasPassword;\n    this.hasMfaEnabled = userFields.hasMfaEnabled;\n    this.canCreateOrgs = userFields.canCreateOrgs;\n    this.legacyUserId = userFields.legacyUserId;\n    this.impersonatorUserId = userFields.impersonatorUserId;\n    this.properties = userFields.properties;\n  }\n  getOrg(orgId) {\n    if (!this.orgIdToUserOrgInfo) {\n      return undefined;\n    }\n    return this.orgIdToUserOrgInfo[orgId];\n  }\n  getOrgByName(orgName) {\n    if (!this.orgIdToUserOrgInfo) {\n      return undefined;\n    }\n    const urlSafeOrgName = orgName.toLowerCase().replace(/ /g, \"-\");\n    for (const orgId in this.orgIdToUserOrgInfo) {\n      const orgMemberInfo = this.orgIdToUserOrgInfo[orgId];\n      if ((orgMemberInfo === null || orgMemberInfo === void 0 ? void 0 : orgMemberInfo.urlSafeOrgName) === urlSafeOrgName) {\n        return orgMemberInfo;\n      }\n    }\n    return undefined;\n  }\n  getUserProperty(key) {\n    if (!this.properties) {\n      return undefined;\n    }\n    return this.properties[key];\n  }\n  getOrgs() {\n    if (!this.orgIdToUserOrgInfo) {\n      return [];\n    }\n    return Object.values(this.orgIdToUserOrgInfo);\n  }\n  isImpersonating() {\n    return !!this.impersonatorUserId;\n  }\n  isRole(orgId, role) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.isRole(role);\n  }\n  isAtLeastRole(orgId, role) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.isAtLeastRole(role);\n  }\n  hasPermission(orgId, permission) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.hasPermission(permission);\n  }\n  hasAllPermissions(orgId, permissions) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.hasAllPermissions(permissions);\n  }\n  static fromJSON(json) {\n    const obj = JSON.parse(json);\n    const orgIdToUserOrgInfo = {};\n    for (const orgId in obj.orgIdToUserOrgInfo) {\n      orgIdToUserOrgInfo[orgId] = OrgMemberInfoClass.fromJSON(JSON.stringify(obj.orgIdToUserOrgInfo[orgId]));\n    }\n    try {\n      return new UserClass({\n        userId: obj.userId,\n        email: obj.email,\n        createdAt: obj.createdAt,\n        firstName: obj.firstName,\n        lastName: obj.lastName,\n        username: obj.username,\n        legacyUserId: obj.legacyUserId,\n        impersonatorUserId: obj.impersonatorUserId,\n        properties: obj.properties,\n        pictureUrl: obj.pictureUrl,\n        hasPassword: obj.hasPassword,\n        hasMfaEnabled: obj.hasMfaEnabled,\n        canCreateOrgs: obj.canCreateOrgs\n      }, orgIdToUserOrgInfo);\n    } catch (e) {\n      console.error(\"Unable to parse User. Make sure the JSON string is a stringified `UserClass` type.\", e);\n      throw e;\n    }\n  }\n}\nclass OrgMemberInfoClass {\n  constructor(orgId, orgName, orgMetadata, urlSafeOrgName, userAssignedRole, userInheritedRolesPlusCurrentRole, userPermissions, orgRoleStructure, userAssignedAdditionalRoles) {\n    this.orgId = orgId;\n    this.orgName = orgName;\n    this.orgMetadata = orgMetadata;\n    this.urlSafeOrgName = urlSafeOrgName;\n    this.orgRoleStructure = orgRoleStructure !== null && orgRoleStructure !== void 0 ? orgRoleStructure : OrgRoleStructure.SingleRole;\n    this.userAssignedRole = userAssignedRole;\n    this.userInheritedRolesPlusCurrentRole = userInheritedRolesPlusCurrentRole;\n    this.userPermissions = userPermissions;\n    this.userAssignedAdditionalRoles = userAssignedAdditionalRoles !== null && userAssignedAdditionalRoles !== void 0 ? userAssignedAdditionalRoles : [];\n  }\n\n  // validation methods\n  isRole(role) {\n    if (this.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return this.userAssignedRole === role || this.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return this.userAssignedRole === role;\n    }\n  }\n  isAtLeastRole(role) {\n    if (this.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return this.userAssignedRole === role || this.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return this.userInheritedRolesPlusCurrentRole.includes(role);\n    }\n  }\n  hasPermission(permission) {\n    return this.userPermissions.includes(permission);\n  }\n  hasAllPermissions(permissions) {\n    return permissions.every(permission => this.hasPermission(permission));\n  }\n  static fromJSON(json) {\n    const obj = JSON.parse(json);\n    try {\n      return new OrgMemberInfoClass(obj.orgId, obj.orgName, obj.orgMetadata, obj.urlSafeOrgName, obj.userAssignedRole, obj.userInheritedRolesPlusCurrentRole, obj.userPermissions, obj.orgRoleStructure, obj.userAssignedAdditionalRoles);\n    } catch (e) {\n      console.error(\"Unable to parse UserOrgInfo. Make sure the JSON string is a stringified `UserOrgInfo` type.\", e);\n      throw e;\n    }\n  }\n}\nfunction convertOrgIdToOrgMemberInfo(orgIdToOrgMemberInfo) {\n  if (orgIdToOrgMemberInfo === undefined) {\n    return undefined;\n  }\n  const orgIdToUserOrgInfo = {};\n  for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n    orgIdToUserOrgInfo[orgMemberInfo.orgId] = new OrgMemberInfoClass(orgMemberInfo.orgId, orgMemberInfo.orgName, orgMemberInfo.orgMetadata, orgMemberInfo.urlSafeOrgName, orgMemberInfo.userAssignedRole, orgMemberInfo.userInheritedRolesPlusCurrentRole, orgMemberInfo.userPermissions, orgMemberInfo.orgRoleStructure, orgMemberInfo.userAssignedAdditionalRoles);\n  }\n  return orgIdToUserOrgInfo;\n}\nfunction fetchAuthenticationInfo(authUrl, activeOrgId) {\n  const queryParams = new URLSearchParams();\n  if (activeOrgId) {\n    queryParams.append(\"active_org_id\", activeOrgId);\n  }\n  let path = `${authUrl}/api/v1/refresh_token`;\n  if (queryParams.toString()) {\n    path += `?${queryParams.toString()}`;\n  }\n  return fetch(path, {\n    method: \"GET\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (res.status === 401) {\n      return null;\n    } else if (res.status === 0) {\n      logCorsError();\n      return Promise.reject({\n        status: 503,\n        message: \"Unable to process authentication response\"\n      });\n    } else if (!res.ok) {\n      return Promise.reject({\n        status: res.status,\n        message: res.statusText\n      });\n    } else {\n      return parseResponse(res);\n    }\n  });\n}\nfunction logout(authUrl) {\n  return fetch(`${authUrl}/api/v1/logout`, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (res.status === 0) {\n      logCorsError();\n      return Promise.reject({\n        status: 503,\n        message: \"Unable to process authentication response\"\n      });\n    } else if (!res.ok) {\n      console.error(\"Logout error\", res.status, res.statusText);\n      return Promise.reject({\n        status: res.status,\n        message: res.statusText\n      });\n    } else {\n      return res.json();\n    }\n  });\n}\nfunction parseResponse(res) {\n  return res.text().then(httpResponse => {\n    try {\n      const authInfoWithoutUserClass = parseJsonConvertingSnakeToCamel(httpResponse);\n      return withExtraArgs(authInfoWithoutUserClass);\n    } catch (e) {\n      console.error(\"Unable to process authentication response\", e);\n      return Promise.reject({\n        status: 500,\n        message: \"Unable to process authentication response\"\n      });\n    }\n  }, e => {\n    console.error(\"Unable to process authentication response\", e);\n    return Promise.reject({\n      status: 500,\n      message: \"Unable to process authentication response\"\n    });\n  });\n}\n\n// The API responds with snake_case, but TypeScript convention is camelCase.\n// When parsing JSON, we pass in reviver function to convert from snake_case to camelCase.\nfunction parseJsonConvertingSnakeToCamel(str) {\n  return JSON.parse(str, function (key, value) {\n    if (key === \"org_id\") {\n      this.orgId = value;\n    } else if (key === \"org_name\") {\n      this.orgName = value;\n    } else if (key === \"org_metadata\") {\n      this.orgMetadata = value;\n    } else if (key === \"url_safe_org_name\") {\n      this.urlSafeOrgName = value;\n    } else if (key === \"user_role\") {\n      this.userAssignedRole = value;\n    } else if (key === \"inherited_user_roles_plus_current_role\") {\n      this.userInheritedRolesPlusCurrentRole = value;\n    } else if (key === \"user_permissions\") {\n      this.userPermissions = value;\n    } else if (key === \"access_token\") {\n      this.accessToken = value;\n    } else if (key === \"expires_at_seconds\") {\n      this.expiresAtSeconds = value;\n    } else if (key === \"org_id_to_org_member_info\") {\n      this.orgIdToOrgMemberInfo = value;\n    } else if (key === \"user_id\") {\n      this.userId = value;\n    } else if (key === \"email_confirmed\") {\n      this.emailConfirmed = value;\n    } else if (key === \"first_name\") {\n      this.firstName = value;\n    } else if (key === \"last_name\") {\n      this.lastName = value;\n    } else if (key === \"picture_url\") {\n      this.pictureUrl = value;\n    } else if (key === \"mfa_enabled\") {\n      this.mfaEnabled = value;\n    } else if (key === \"has_password\") {\n      this.hasPassword = value;\n    } else if (key === \"can_create_orgs\") {\n      this.canCreateOrgs = value;\n    } else if (key === \"created_at\") {\n      this.createdAt = value;\n    } else if (key === \"last_active_at\") {\n      this.lastActiveAt = value;\n    } else if (key === \"legacy_user_id\") {\n      this.legacyUserId = value;\n    } else if (key === \"impersonator_user\") {\n      this.impersonatorUserId = value;\n    } else if (key === \"org_role_structure\") {\n      this.orgRoleStructure = value;\n    } else if (key === \"additional_roles\") {\n      this.userAssignedAdditionalRoles = value;\n    } else {\n      return value;\n    }\n  });\n}\nfunction withExtraArgs(authInfoWithoutExtraArgs) {\n  if (authInfoWithoutExtraArgs.orgIdToOrgMemberInfo) {\n    authInfoWithoutExtraArgs.orgHelper = getOrgHelper$1(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo);\n    authInfoWithoutExtraArgs.accessHelper = getAccessHelper$1(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo);\n  }\n  authInfoWithoutExtraArgs.userClass = new UserClass({\n    userId: authInfoWithoutExtraArgs.user.userId,\n    email: authInfoWithoutExtraArgs.user.email,\n    createdAt: authInfoWithoutExtraArgs.user.createdAt,\n    firstName: authInfoWithoutExtraArgs.user.firstName,\n    lastName: authInfoWithoutExtraArgs.user.lastName,\n    username: authInfoWithoutExtraArgs.user.username,\n    properties: authInfoWithoutExtraArgs.user.properties,\n    pictureUrl: authInfoWithoutExtraArgs.user.pictureUrl,\n    hasPassword: authInfoWithoutExtraArgs.user.hasPassword,\n    hasMfaEnabled: authInfoWithoutExtraArgs.user.mfaEnabled,\n    canCreateOrgs: authInfoWithoutExtraArgs.user.canCreateOrgs,\n    legacyUserId: authInfoWithoutExtraArgs.user.legacyUserId,\n    impersonatorUserId: authInfoWithoutExtraArgs.impersonatorUserId\n  }, convertOrgIdToOrgMemberInfo(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo));\n  return Promise.resolve(authInfoWithoutExtraArgs);\n}\nfunction logCorsError() {\n  console.error(\"Request to PropelAuth failed due to a CORS error. There are a few likely causes: \\n\" + \" 1. In the Frontend Integration section of your dashboard, make sure your requests are coming either the specified Application URL or localhost with a matching port.\\n\" + \" 2. Make sure your server is hosted on HTTPS in production.\");\n}\nconst DEFAULT_RETRIES = 3;\nconst runWithRetriesOnAnyError = async fn => {\n  return runWithRetriesInner(fn, DEFAULT_RETRIES);\n};\nconst runWithRetriesInner = async (fn, numRetriesLeft) => {\n  try {\n    return await fn();\n  } catch (e) {\n    if (numRetriesLeft <= 0) {\n      throw e;\n    }\n    await delay(numRetriesLeftToDelay(numRetriesLeft));\n    return runWithRetriesInner(fn, numRetriesLeft - 1);\n  }\n};\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst numRetriesLeftToDelay = numRetriesLeft => {\n  // We could be fancy, but we only retry 3 times so...\n  if (numRetriesLeft >= 3) {\n    return 100;\n  } else if (numRetriesLeft === 2) {\n    return 200;\n  } else {\n    return 300;\n  }\n};\nfunction currentTimeSeconds() {\n  return Date.now() / 1000;\n}\nfunction hasLocalStorage() {\n  return typeof localStorage !== \"undefined\";\n}\nfunction hasWindow() {\n  return typeof window !== \"undefined\";\n}\nfunction getLocalStorageNumber(key) {\n  if (!hasLocalStorage()) {\n    return null;\n  }\n  const value = localStorage.getItem(key);\n  if (!value) {\n    return null;\n  }\n  const num = parseInt(value, 10);\n  if (Number.isNaN(num)) {\n    return null;\n  }\n  return num;\n}\nconst LOGGED_IN_AT_KEY = \"__PROPEL_AUTH_LOGGED_IN_AT\";\nconst LOGGED_OUT_AT_KEY = \"__PROPEL_AUTH_LOGGED_OUT_AT\";\nconst AUTH_TOKEN_REFRESH_BEFORE_EXPIRATION_SECONDS = 10 * 60;\nconst DEBOUNCE_DURATION_FOR_REFOCUS_SECONDS = 60;\nconst ACTIVE_ORG_ACCESS_TOKEN_REFRESH_EXPIRATION_SECONDS = 60 * 5;\nconst encodeBase64 = str => {\n  const encode = window ? window.btoa : btoa;\n  return encode(str);\n};\nfunction validateAndCleanupOptions(authOptions) {\n  try {\n    // This helps make sure we have a consistent URL ignoring things like trailing slashes\n    const authUrl = new URL(authOptions.authUrl);\n    authOptions.authUrl = authUrl.origin;\n  } catch (e) {\n    console.error(\"Invalid authUrl\", e);\n    throw new Error(\"Unable to initialize auth client\");\n  }\n  if (authOptions.enableBackgroundTokenRefresh === undefined) {\n    authOptions.enableBackgroundTokenRefresh = true;\n  }\n}\nfunction createClient(authOptions) {\n  validateAndCleanupOptions(authOptions);\n\n  // Internal state\n  const clientState = {\n    initialLoadFinished: false,\n    authenticationInfo: null,\n    observers: [],\n    accessTokenObservers: [],\n    lastLoggedInAtMessage: getLocalStorageNumber(LOGGED_IN_AT_KEY),\n    lastLoggedOutAtMessage: getLocalStorageNumber(LOGGED_OUT_AT_KEY),\n    authUrl: authOptions.authUrl,\n    refreshInterval: null,\n    lastRefresh: null,\n    accessTokenActiveOrgMap: {}\n  };\n\n  // Helper functions\n  function notifyObservers(isLoggedIn) {\n    for (let i = 0; i < clientState.observers.length; i++) {\n      const observer = clientState.observers[i];\n      if (observer) {\n        observer(isLoggedIn);\n      }\n    }\n  }\n  function notifyObserversOfAccessTokenChange(accessToken) {\n    for (let i = 0; i < clientState.accessTokenObservers.length; i++) {\n      const observer = clientState.accessTokenObservers[i];\n      if (observer) {\n        observer(accessToken);\n      }\n    }\n  }\n  function userJustLoggedOut(accessToken, previousAccessToken) {\n    // Edge case: the first time we go to the page, if we can't load the\n    //   auth token we should treat it as a logout event\n    return !accessToken && (previousAccessToken || !clientState.initialLoadFinished);\n  }\n  function userJustLoggedIn(accessToken, previousAccessToken) {\n    return !previousAccessToken && accessToken;\n  }\n  function updateLastLoggedOutAt() {\n    const loggedOutAt = currentTimeSeconds();\n    clientState.lastLoggedOutAtMessage = loggedOutAt;\n    if (hasLocalStorage()) {\n      localStorage.setItem(LOGGED_OUT_AT_KEY, String(loggedOutAt));\n    }\n  }\n  function updateLastLoggedInAt() {\n    const loggedInAt = currentTimeSeconds();\n    clientState.lastLoggedInAtMessage = loggedInAt;\n    if (hasLocalStorage()) {\n      localStorage.setItem(LOGGED_IN_AT_KEY, String(loggedInAt));\n    }\n  }\n\n  /**\n   * Invalidates all org's access tokens.\n   */\n  function resetAccessTokenActiveOrgMap() {\n    clientState.accessTokenActiveOrgMap = {};\n  }\n  function setAuthenticationInfoAndUpdateDownstream(authenticationInfo) {\n    var _clientState$authenti;\n    const previousAccessToken = (_clientState$authenti = clientState.authenticationInfo) === null || _clientState$authenti === void 0 ? void 0 : _clientState$authenti.accessToken;\n    clientState.authenticationInfo = authenticationInfo;\n    const accessToken = authenticationInfo === null || authenticationInfo === void 0 ? void 0 : authenticationInfo.accessToken;\n    if (userJustLoggedOut(accessToken, previousAccessToken)) {\n      notifyObservers(false);\n      updateLastLoggedOutAt();\n    } else if (userJustLoggedIn(accessToken, previousAccessToken)) {\n      notifyObservers(true);\n      updateLastLoggedInAt();\n    }\n    if (previousAccessToken !== accessToken) {\n      notifyObserversOfAccessTokenChange(accessToken);\n    }\n    resetAccessTokenActiveOrgMap();\n    clientState.lastRefresh = currentTimeSeconds();\n    clientState.initialLoadFinished = true;\n  }\n  async function forceRefreshToken(returnCached) {\n    try {\n      // Happy case, we fetch auth info and save it\n      const authenticationInfo = await runWithRetriesOnAnyError(() => fetchAuthenticationInfo(clientState.authUrl));\n      setAuthenticationInfoAndUpdateDownstream(authenticationInfo);\n      return authenticationInfo;\n    } catch (e) {\n      // If there was an error, we sometimes still want to return the value we have cached\n      //   (e.g. if we were prefetching), so in those cases we swallow the exception\n      if (returnCached) {\n        return clientState.authenticationInfo;\n      } else {\n        setAuthenticationInfoAndUpdateDownstream(null);\n        throw e;\n      }\n    }\n  }\n  const getSignupPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/signup`;\n    if (options) {\n      const {\n        postSignupRedirectUrl,\n        userSignupQueryParameters\n      } = options;\n      if (postSignupRedirectUrl) {\n        qs.set(\"rt\", encodeBase64(postSignupRedirectUrl));\n      }\n      if (userSignupQueryParameters) {\n        Object.entries(userSignupQueryParameters).forEach(_ref => {\n          let [key, value] = _ref;\n          qs.set(key, value);\n        });\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getLoginPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/login`;\n    if (options) {\n      const {\n        postLoginRedirectUrl,\n        userSignupQueryParameters\n      } = options;\n      if (postLoginRedirectUrl) {\n        qs.set(\"rt\", encodeBase64(postLoginRedirectUrl));\n      }\n      if (userSignupQueryParameters) {\n        Object.entries(userSignupQueryParameters).forEach(_ref2 => {\n          let [key, value] = _ref2;\n          qs.set(key, value);\n        });\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getAccountPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/account`;\n    if (options) {\n      const {\n        redirectBackToUrl\n      } = options;\n      if (redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getOrgPageUrl = (orgId, options) => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/org`;\n    if (orgId) {\n      qs.set(\"id\", orgId);\n    }\n    if (options) {\n      if (options.redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(options.redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getCreateOrgPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/create_org`;\n    if (options) {\n      const {\n        redirectBackToUrl\n      } = options;\n      if (redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getSetupSAMLPageUrl = (orgId, options) => {\n    let qs = new URLSearchParams();\n    if (options) {\n      if (options.redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(options.redirectBackToUrl));\n      }\n    }\n    qs.set(\"id\", orgId);\n    return `${clientState.authUrl}/saml?${qs.toString()}`;\n  };\n  const client = {\n    addLoggedInChangeObserver(loggedInChangeObserver) {\n      const hasObserver = clientState.observers.includes(loggedInChangeObserver);\n      if (hasObserver) {\n        console.error(\"Observer has been attached already.\");\n      } else if (!loggedInChangeObserver) {\n        console.error(\"Cannot add a null observer\");\n      } else {\n        clientState.observers.push(loggedInChangeObserver);\n      }\n    },\n    removeLoggedInChangeObserver(loggedInChangeObserver) {\n      const observerIndex = clientState.observers.indexOf(loggedInChangeObserver);\n      if (observerIndex === -1) {\n        console.error(\"Cannot find observer to remove\");\n      } else {\n        clientState.observers.splice(observerIndex, 1);\n      }\n    },\n    addAccessTokenChangeObserver(observer) {\n      const hasObserver = clientState.accessTokenObservers.includes(observer);\n      if (hasObserver) {\n        console.error(\"Observer has been attached already.\");\n      } else if (!observer) {\n        console.error(\"Cannot add a null observer\");\n      } else {\n        clientState.accessTokenObservers.push(observer);\n      }\n    },\n    removeAccessTokenChangeObserver(observer) {\n      const observerIndex = clientState.accessTokenObservers.indexOf(observer);\n      if (observerIndex === -1) {\n        console.error(\"Cannot find observer to remove\");\n      } else {\n        clientState.accessTokenObservers.splice(observerIndex, 1);\n      }\n    },\n    async getAuthenticationInfoOrNull(forceRefresh) {\n      const currentTimeSecs = currentTimeSeconds();\n      if (forceRefresh) {\n        return await forceRefreshToken(false);\n      } else if (!clientState.authenticationInfo) {\n        return await forceRefreshToken(false);\n      } else if (currentTimeSecs + AUTH_TOKEN_REFRESH_BEFORE_EXPIRATION_SECONDS > clientState.authenticationInfo.expiresAtSeconds) {\n        // Small edge case: If we were being proactive\n        //   and the auth information hasn't expired yet, swallow any exceptions\n        const returnCached = currentTimeSecs < clientState.authenticationInfo.expiresAtSeconds;\n        return await forceRefreshToken(returnCached);\n      } else {\n        return clientState.authenticationInfo;\n      }\n    },\n    async getAccessTokenForOrg(orgId) {\n      // First, check if there is a valid access token for the org ID in the\n      // valid time frame.\n      const currentTimeSecs = currentTimeSeconds();\n      const activeOrgAccessToken = clientState.accessTokenActiveOrgMap[orgId];\n      if (!!activeOrgAccessToken) {\n        if (currentTimeSecs < activeOrgAccessToken.fetchedAt + ACTIVE_ORG_ACCESS_TOKEN_REFRESH_EXPIRATION_SECONDS) {\n          return {\n            accessToken: activeOrgAccessToken.accessToken,\n            error: undefined\n          };\n        }\n      }\n      // Fetch the access token for the org ID and update.\n      try {\n        const authenticationInfo = await runWithRetriesOnAnyError(() => fetchAuthenticationInfo(clientState.authUrl, orgId));\n        if (!authenticationInfo) {\n          // Only null if 401 unauthorized.\n          return {\n            error: \"user_not_in_org\",\n            accessToken: null\n          };\n        }\n        const {\n          accessToken\n        } = authenticationInfo;\n        clientState.accessTokenActiveOrgMap[orgId] = {\n          accessToken,\n          fetchedAt: currentTimeSecs\n        };\n        return {\n          accessToken,\n          error: undefined\n        };\n      } catch (e) {\n        return {\n          error: \"unexpected_error\",\n          accessToken: null\n        };\n      }\n    },\n    getSignupPageUrl(options) {\n      return getSignupPageUrl(options);\n    },\n    getLoginPageUrl(options) {\n      return getLoginPageUrl(options);\n    },\n    getAccountPageUrl(options) {\n      return getAccountPageUrl(options);\n    },\n    getOrgPageUrl(orgId, options) {\n      return getOrgPageUrl(orgId, options);\n    },\n    getCreateOrgPageUrl(options) {\n      return getCreateOrgPageUrl(options);\n    },\n    getSetupSAMLPageUrl(orgId, options) {\n      return getSetupSAMLPageUrl(orgId, options);\n    },\n    redirectToSignupPage(options) {\n      window.location.href = getSignupPageUrl(options);\n    },\n    redirectToLoginPage(options) {\n      window.location.href = getLoginPageUrl(options);\n    },\n    redirectToAccountPage(options) {\n      window.location.href = getAccountPageUrl(options);\n    },\n    redirectToOrgPage(orgId, options) {\n      window.location.href = getOrgPageUrl(orgId, options);\n    },\n    redirectToCreateOrgPage(options) {\n      window.location.href = getCreateOrgPageUrl(options);\n    },\n    redirectToSetupSAMLPage(orgId, options) {\n      window.location.href = getSetupSAMLPageUrl(orgId, options);\n    },\n    async logout(redirectAfterLogout) {\n      const logoutResponse = await logout(clientState.authUrl);\n      setAuthenticationInfoAndUpdateDownstream(null);\n      if (redirectAfterLogout) {\n        window.location.href = logoutResponse.redirect_to;\n      }\n    },\n    destroy() {\n      clientState.observers = [];\n      clientState.accessTokenObservers = [];\n      window.removeEventListener(\"storage\", onStorageChange);\n      if (clientState.refreshInterval) {\n        clearInterval(clientState.refreshInterval);\n      }\n    }\n  };\n  const onStorageChange = async function () {\n    // If localStorage isn't available, nothing to do here.\n    // This usually happens in frameworks that have some SSR components\n    if (!hasLocalStorage()) {\n      return;\n    }\n    const loggedOutAt = getLocalStorageNumber(LOGGED_OUT_AT_KEY);\n    const loggedInAt = getLocalStorageNumber(LOGGED_IN_AT_KEY);\n\n    // If we've detected a logout event after the last one our client is aware of, trigger a refresh\n    if (loggedOutAt && (!clientState.lastLoggedOutAtMessage || loggedOutAt > clientState.lastLoggedOutAtMessage)) {\n      clientState.lastLoggedOutAtMessage = loggedOutAt;\n      if (clientState.authenticationInfo) {\n        await forceRefreshToken(true);\n      }\n    }\n\n    // If we've detected a login event after the last one our client is aware of, trigger a refresh\n    if (loggedInAt && (!clientState.lastLoggedInAtMessage || loggedInAt > clientState.lastLoggedInAtMessage)) {\n      clientState.lastLoggedInAtMessage = loggedInAt;\n      if (!clientState.authenticationInfo) {\n        await forceRefreshToken(true);\n      }\n    }\n  };\n\n  // If we were offline or on a different tab, when we return, refetch auth info\n  // Some browsers trigger focus more often than we'd like, so we'll debounce a little here as well\n  const onOnlineOrFocus = async function () {\n    if (clientState.lastRefresh && currentTimeSeconds() > clientState.lastRefresh + DEBOUNCE_DURATION_FOR_REFOCUS_SECONDS) {\n      await forceRefreshToken(true);\n    } else {\n      await client.getAuthenticationInfoOrNull();\n    }\n  };\n  if (hasWindow()) {\n    window.addEventListener(\"storage\", onStorageChange);\n    window.addEventListener(\"online\", onOnlineOrFocus);\n    window.addEventListener(\"focus\", onOnlineOrFocus);\n    if (authOptions.enableBackgroundTokenRefresh) {\n      client.getAuthenticationInfoOrNull();\n      clientState.refreshInterval = window.setInterval(client.getAuthenticationInfoOrNull, 60000);\n    }\n  }\n  return client;\n}\nconst DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY = \"__last_selected_org\";\n\n/**\n * @deprecated This hook is deprecated and no longer supported.\n */\nfunction useActiveOrg() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useActiveOrg must be used within an AuthProvider or RequiredAuthProvider\");\n  }\n  if (context.loading || !context.authInfo || !context.authInfo.orgHelper) {\n    return null;\n  }\n  const proposedActiveOrgIdOrName = context.activeOrgFn();\n  if (!proposedActiveOrgIdOrName) {\n    return null;\n  }\n  const orgHelper = context.authInfo.orgHelper;\n  return orgHelper.getOrg(proposedActiveOrgIdOrName) || orgHelper.getOrgByName(proposedActiveOrgIdOrName);\n}\nfunction saveOrgSelectionToLocalStorage(orgIdOrName) {\n  if (localStorage) {\n    localStorage.setItem(DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY, orgIdOrName);\n  }\n}\nfunction loadOrgSelectionFromLocalStorage() {\n  if (localStorage) {\n    return localStorage.getItem(DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY);\n  }\n  return null;\n}\nconst useClientRef = props => {\n  const [accessTokenChangeCounter, setAccessTokenChangeCounter] = useState(0);\n  const {\n    authUrl\n  } = props;\n\n  // Use a ref to store the client so that it doesn't get recreated on every render\n  const clientRef = useRef(null);\n  if (clientRef.current === null) {\n    const client = createClient({\n      authUrl,\n      enableBackgroundTokenRefresh: true\n    });\n    client.addAccessTokenChangeObserver(() => setAccessTokenChangeCounter(x => x + 1));\n    clientRef.current = {\n      authUrl,\n      client\n    };\n  }\n\n  // If the authUrl changes, destroy the old client and create a new one\n  useEffect(() => {\n    if (clientRef.current === null) {\n      return;\n    } else if (clientRef.current.authUrl === authUrl) {\n      return;\n    } else {\n      clientRef.current.client.destroy();\n      const newClient = createClient({\n        authUrl,\n        enableBackgroundTokenRefresh: true\n      });\n      newClient.addAccessTokenChangeObserver(() => setAccessTokenChangeCounter(x => x + 1));\n      clientRef.current = {\n        authUrl,\n        client: newClient\n      };\n    }\n  }, [authUrl]);\n  return {\n    clientRef,\n    accessTokenChangeCounter\n  };\n};\nconst useClientRefCallback = (clientRef, callback) => {\n  return useCallback(function () {\n    const client = clientRef.current?.client;\n    if (!client) {\n      throw new Error(\"Client is not initialized\");\n    }\n    return callback(client)(...arguments);\n  }, [callback]);\n};\nconst AuthContext = /*#__PURE__*/React.createContext(undefined);\nconst initialAuthInfoState = {\n  loading: true,\n  authInfo: null\n};\nfunction authInfoStateReducer(_state, action) {\n  if (!action.authInfo) {\n    return {\n      loading: false,\n      authInfo: action.authInfo\n    };\n  } else if (_state.loading) {\n    return {\n      loading: false,\n      authInfo: action.authInfo\n    };\n  } else if (_state.authInfo && _state.authInfo.accessToken !== action.authInfo.accessToken) {\n    return {\n      loading: false,\n      authInfo: action.authInfo\n    };\n  } else {\n    return _state;\n  }\n}\nconst AuthProvider = props => {\n  const [authInfoState, dispatch] = useReducer(authInfoStateReducer, initialAuthInfoState);\n  const {\n    clientRef,\n    accessTokenChangeCounter\n  } = useClientRef({\n    authUrl: props.authUrl\n  });\n\n  // Refresh the token when the user has logged in or out\n  useEffect(() => {\n    let didCancel = false;\n    async function refreshToken() {\n      const client = clientRef.current?.client;\n      if (!client) {\n        return;\n      }\n      try {\n        const authInfo = await client.getAuthenticationInfoOrNull();\n        if (!didCancel) {\n          dispatch({\n            authInfo\n          });\n        }\n      } catch (_) {\n        // Important errors are logged in the client library\n      }\n    }\n    refreshToken();\n    return () => {\n      didCancel = true;\n    };\n  }, [accessTokenChangeCounter]);\n\n  // Deprecation warning\n  useEffect(() => {\n    if (props.getActiveOrgFn) {\n      console.warn(\"The `getActiveOrgFn` prop is deprecated.\");\n    }\n  }, []);\n  const logout = useClientRefCallback(clientRef, client => client.logout);\n  const redirectToLoginPage = useClientRefCallback(clientRef, client => client.redirectToLoginPage);\n  const redirectToSignupPage = useClientRefCallback(clientRef, client => client.redirectToSignupPage);\n  const redirectToAccountPage = useClientRefCallback(clientRef, client => client.redirectToAccountPage);\n  const redirectToOrgPage = useClientRefCallback(clientRef, client => client.redirectToOrgPage);\n  const redirectToCreateOrgPage = useClientRefCallback(clientRef, client => client.redirectToCreateOrgPage);\n  const redirectToSetupSAMLPage = useClientRefCallback(clientRef, client => client.redirectToSetupSAMLPage);\n  const getLoginPageUrl = useClientRefCallback(clientRef, client => client.getLoginPageUrl);\n  const getSignupPageUrl = useClientRefCallback(clientRef, client => client.getSignupPageUrl);\n  const getAccountPageUrl = useClientRefCallback(clientRef, client => client.getAccountPageUrl);\n  const getOrgPageUrl = useClientRefCallback(clientRef, client => client.getOrgPageUrl);\n  const getCreateOrgPageUrl = useClientRefCallback(clientRef, client => client.getCreateOrgPageUrl);\n  const getSetupSAMLPageUrl = useClientRefCallback(clientRef, client => client.getSetupSAMLPageUrl);\n  const getAccessTokenForOrg = useClientRefCallback(clientRef, client => client.getAccessTokenForOrg);\n  const refreshAuthInfo = useCallback(async () => {\n    if (clientRef.current === null) {\n      return;\n    }\n    const client = clientRef.current.client;\n    const authInfo = await client.getAuthenticationInfoOrNull(true);\n    dispatch({\n      authInfo\n    });\n  }, [dispatch]);\n\n  // TODO: Remove this, as both `getActiveOrgFn` and `loadOrgSelectionFromLocalStorage` are deprecated.\n  const deprecatedActiveOrgFn = props.getActiveOrgFn || loadOrgSelectionFromLocalStorage;\n  const {\n    defaultDisplayWhileLoading,\n    defaultDisplayIfLoggedOut\n  } = props;\n  const value = {\n    loading: authInfoState.loading,\n    authInfo: authInfoState.authInfo,\n    logout,\n    defaultDisplayWhileLoading,\n    defaultDisplayIfLoggedOut,\n    redirectToLoginPage,\n    redirectToSignupPage,\n    redirectToAccountPage,\n    redirectToOrgPage,\n    redirectToCreateOrgPage,\n    redirectToSetupSAMLPage,\n    getLoginPageUrl,\n    activeOrgFn: deprecatedActiveOrgFn,\n    getSignupPageUrl,\n    getAccountPageUrl,\n    getOrgPageUrl,\n    getCreateOrgPageUrl,\n    getSetupSAMLPageUrl,\n    refreshAuthInfo,\n    tokens: {\n      getAccessTokenForOrg\n    }\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: value\n  }, props.children);\n};\n\n// User information that we will hard code within the AuthProvider\n\n/**\n * A version of the AuthProvider specifically used for testing. It won't make any external requests, but will\n * instead set up the AuthProvider to act as if the information provided was returned from the API.\n */\nconst AuthProviderForTesting = _ref3 => {\n  let {\n    loading,\n    userInformation,\n    activeOrgFn,\n    children\n  } = _ref3;\n  const authInfo = getAuthInfoForTesting(userInformation);\n  const activeOrgFnWithDefault = activeOrgFn ? activeOrgFn : () => null;\n  const contextValue = {\n    loading: !!loading,\n    authInfo,\n    logout: () => Promise.resolve(),\n    redirectToLoginPage: () => {},\n    redirectToSignupPage: () => {},\n    redirectToAccountPage: () => {},\n    redirectToOrgPage: () => {},\n    redirectToCreateOrgPage: () => {},\n    redirectToSetupSAMLPage: () => {},\n    getLoginPageUrl: () => \"\",\n    getSignupPageUrl: () => \"\",\n    getAccountPageUrl: () => \"\",\n    getOrgPageUrl: () => \"\",\n    getCreateOrgPageUrl: () => \"\",\n    getSetupSAMLPageUrl: () => \"\",\n    activeOrgFn: activeOrgFnWithDefault,\n    refreshAuthInfo: () => Promise.resolve(),\n    tokens: {\n      getAccessTokenForOrg: () => Promise.resolve({\n        error: undefined,\n        accessToken: \"ACCESS_TOKEN\"\n      })\n    }\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: contextValue\n  }, children);\n};\nfunction getAuthInfoForTesting(userInformation) {\n  if (!userInformation) {\n    return null;\n  }\n  const orgIdToOrgMemberInfo = {};\n  for (const orgMemberInfo of userInformation.orgMemberInfos) {\n    orgIdToOrgMemberInfo[orgMemberInfo.orgId] = orgMemberInfo;\n  }\n  const accessTokenWithDefault = userInformation.accessToken === undefined ? \"PLACEHOLDER_ACCESS_TOKEN\" : userInformation.accessToken;\n  return {\n    accessToken: accessTokenWithDefault,\n    expiresAtSeconds: 1701596820,\n    orgHelper: getOrgHelper(orgIdToOrgMemberInfo),\n    accessHelper: getAccessHelper(orgIdToOrgMemberInfo),\n    orgIdToOrgMemberInfo: orgIdToOrgMemberInfo,\n    user: userInformation.user,\n    userClass: new UserClass(userInformation.user, toOrgIdToUserOrgInfo(orgIdToOrgMemberInfo))\n  };\n}\nfunction toOrgIdToUserOrgInfo(orgIdToOrgMemberInfo) {\n  const orgIdToUserOrgInfo = {};\n  for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n    orgIdToUserOrgInfo[orgMemberInfo.orgId] = new OrgMemberInfoClass(orgMemberInfo.orgId, orgMemberInfo.orgName, {}, orgMemberInfo.urlSafeOrgName, orgMemberInfo.userAssignedRole, orgMemberInfo.userInheritedRolesPlusCurrentRole, orgMemberInfo.userPermissions);\n  }\n  return orgIdToUserOrgInfo;\n}\n\n// These helpers come from @propelauth/javascript, down the road we may want to export them from that library\n//   instead of copying\nfunction getOrgHelper(orgIdToOrgMemberInfo) {\n  return {\n    getOrg(orgId) {\n      if (Object.prototype.hasOwnProperty.call(orgIdToOrgMemberInfo, orgId)) {\n        return orgIdToOrgMemberInfo[orgId];\n      } else {\n        return undefined;\n      }\n    },\n    getOrgIds() {\n      return Object.keys(orgIdToOrgMemberInfo);\n    },\n    getOrgs() {\n      return Object.values(orgIdToOrgMemberInfo);\n    },\n    getOrgByName(orgName) {\n      for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n        if (orgMemberInfo.orgName === orgName || orgMemberInfo.urlSafeOrgName === orgName) {\n          return orgMemberInfo;\n        }\n      }\n      return undefined;\n    }\n  };\n}\nfunction getAccessHelper(orgIdToOrgMemberInfo) {\n  function isRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return orgMemberInfo.userAssignedRole === role;\n  }\n  function isAtLeastRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return orgMemberInfo.userInheritedRolesPlusCurrentRole.includes(role);\n  }\n  function hasPermission(orgId, permission) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return orgMemberInfo.userPermissions.includes(permission);\n  }\n  function hasAllPermissions(orgId, permissions) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return permissions.every(permission => orgMemberInfo.userPermissions.includes(permission));\n  }\n  function getAccessHelperWithOrgId(orgId) {\n    return {\n      isRole(role) {\n        return isRole(orgId, role);\n      },\n      isAtLeastRole(role) {\n        return isAtLeastRole(orgId, role);\n      },\n      hasPermission(permission) {\n        return hasPermission(orgId, permission);\n      },\n      hasAllPermissions(permissions) {\n        return hasAllPermissions(orgId, permissions);\n      }\n    };\n  }\n  return {\n    isRole,\n    isAtLeastRole,\n    hasPermission,\n    hasAllPermissions,\n    getAccessHelperWithOrgId\n  };\n}\nfunction useAuthInfo() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuthInfo must be used within an AuthProvider or RequiredAuthProvider\");\n  }\n  const {\n    loading,\n    authInfo,\n    refreshAuthInfo,\n    tokens\n  } = context;\n  if (loading) {\n    return {\n      loading: true,\n      isLoggedIn: undefined,\n      accessToken: undefined,\n      orgHelper: undefined,\n      accessHelper: undefined,\n      user: undefined,\n      userClass: undefined,\n      isImpersonating: undefined,\n      impersonatorUserId: undefined,\n      refreshAuthInfo,\n      tokens,\n      accessTokenExpiresAtSeconds: undefined\n    };\n  } else if (authInfo && authInfo.accessToken) {\n    return {\n      loading: false,\n      isLoggedIn: true,\n      accessToken: authInfo.accessToken,\n      orgHelper: authInfo.orgHelper,\n      accessHelper: authInfo.accessHelper,\n      user: authInfo.user,\n      userClass: authInfo.userClass,\n      isImpersonating: !!authInfo.impersonatorUserId,\n      impersonatorUserId: authInfo.impersonatorUserId,\n      refreshAuthInfo,\n      tokens,\n      accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds\n    };\n  }\n  return {\n    loading: false,\n    isLoggedIn: false,\n    accessToken: null,\n    user: null,\n    userClass: null,\n    orgHelper: null,\n    accessHelper: null,\n    isImpersonating: false,\n    impersonatorUserId: undefined,\n    refreshAuthInfo,\n    tokens,\n    accessTokenExpiresAtSeconds: undefined\n  };\n}\nfunction useOrgHelper() {\n  const authInfo = useAuthInfo();\n  if (authInfo.loading) {\n    return {\n      loading: true,\n      orgHelper: null\n    };\n  } else if (authInfo.isLoggedIn) {\n    return {\n      loading: false,\n      orgHelper: authInfo.orgHelper\n    };\n  } else {\n    return {\n      loading: false,\n      orgHelper: null\n    };\n  }\n}\nfunction useAccessHelper() {\n  const authInfo = useAuthInfo();\n  if (authInfo.loading) {\n    return {\n      loading: true,\n      accessHelper: null\n    };\n  } else if (authInfo.isLoggedIn) {\n    return {\n      loading: false,\n      accessHelper: authInfo.accessHelper\n    };\n  } else {\n    return {\n      loading: false,\n      accessHelper: null\n    };\n  }\n}\nfunction useHostedPageUrls() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useHostedPageUrls must be used within an AuthProvider or RequiredAuthProvider\");\n  }\n  const {\n    getLoginPageUrl,\n    getSignupPageUrl,\n    getAccountPageUrl,\n    getOrgPageUrl,\n    getCreateOrgPageUrl,\n    getSetupSAMLPageUrl\n  } = context;\n  return {\n    getLoginPageUrl,\n    getSignupPageUrl,\n    getAccountPageUrl,\n    getOrgPageUrl,\n    getCreateOrgPageUrl,\n    getSetupSAMLPageUrl\n  };\n}\nfunction useLogoutFunction() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useLogoutFunction must be used within an AuthProvider or RequiredAuthProvider\");\n  }\n  const {\n    logout\n  } = context;\n  return logout;\n}\nfunction useRedirectFunctions() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useRedirectFunctions must be used within an AuthProvider or RequiredAuthProvider\");\n  }\n  const {\n    redirectToAccountPage,\n    redirectToSignupPage,\n    redirectToLoginPage,\n    redirectToOrgPage,\n    redirectToCreateOrgPage,\n    redirectToSetupSAMLPage\n  } = context;\n  return {\n    redirectToSignupPage,\n    redirectToLoginPage,\n    redirectToAccountPage,\n    redirectToOrgPage,\n    redirectToCreateOrgPage,\n    redirectToSetupSAMLPage\n  };\n}\nfunction RedirectToSignup(_ref4) {\n  let {\n    children,\n    postSignupRedirectUrl,\n    userSignupQueryParameters\n  } = _ref4;\n  const {\n    redirectToSignupPage\n  } = useRedirectFunctions();\n  useEffect(() => redirectToSignupPage({\n    postSignupRedirectUrl,\n    userSignupQueryParameters\n  }), []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n}\nfunction RedirectToLogin(_ref5) {\n  let {\n    children,\n    postLoginRedirectUrl\n  } = _ref5;\n  const {\n    redirectToLoginPage\n  } = useRedirectFunctions();\n  useEffect(() => {\n    if (postLoginRedirectUrl) {\n      redirectToLoginPage({\n        postLoginRedirectUrl\n      });\n    } else {\n      redirectToLoginPage();\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction createCommonjsModule(fn) {\n  var module = {\n    exports: {}\n  };\n  return fn(module, module.exports), module.exports;\n}\n\n/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar b = \"function\" === typeof Symbol && Symbol.for,\n  c = b ? Symbol.for(\"react.element\") : 60103,\n  d = b ? Symbol.for(\"react.portal\") : 60106,\n  e = b ? Symbol.for(\"react.fragment\") : 60107,\n  f = b ? Symbol.for(\"react.strict_mode\") : 60108,\n  g = b ? Symbol.for(\"react.profiler\") : 60114,\n  h = b ? Symbol.for(\"react.provider\") : 60109,\n  k = b ? Symbol.for(\"react.context\") : 60110,\n  l = b ? Symbol.for(\"react.async_mode\") : 60111,\n  m = b ? Symbol.for(\"react.concurrent_mode\") : 60111,\n  n = b ? Symbol.for(\"react.forward_ref\") : 60112,\n  p = b ? Symbol.for(\"react.suspense\") : 60113,\n  q = b ? Symbol.for(\"react.suspense_list\") : 60120,\n  r = b ? Symbol.for(\"react.memo\") : 60115,\n  t = b ? Symbol.for(\"react.lazy\") : 60116,\n  v = b ? Symbol.for(\"react.block\") : 60121,\n  w = b ? Symbol.for(\"react.fundamental\") : 60117,\n  x = b ? Symbol.for(\"react.responder\") : 60118,\n  y = b ? Symbol.for(\"react.scope\") : 60119;\nfunction z(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var u = a.$$typeof;\n    switch (u) {\n      case c:\n        switch (a = a.type, a) {\n          case l:\n          case m:\n          case e:\n          case g:\n          case f:\n          case p:\n            return a;\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case n:\n              case t:\n              case r:\n              case h:\n                return a;\n              default:\n                return u;\n            }\n        }\n      case d:\n        return u;\n    }\n  }\n}\nfunction A(a) {\n  return z(a) === m;\n}\nvar AsyncMode = l;\nvar ConcurrentMode = m;\nvar ContextConsumer = k;\nvar ContextProvider = h;\nvar Element = c;\nvar ForwardRef = n;\nvar Fragment = e;\nvar Lazy = t;\nvar Memo = r;\nvar Portal = d;\nvar Profiler = g;\nvar StrictMode = f;\nvar Suspense = p;\nvar isAsyncMode = function (a) {\n  return A(a) || z(a) === l;\n};\nvar isConcurrentMode = A;\nvar isContextConsumer = function (a) {\n  return z(a) === k;\n};\nvar isContextProvider = function (a) {\n  return z(a) === h;\n};\nvar isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === c;\n};\nvar isForwardRef = function (a) {\n  return z(a) === n;\n};\nvar isFragment = function (a) {\n  return z(a) === e;\n};\nvar isLazy = function (a) {\n  return z(a) === t;\n};\nvar isMemo = function (a) {\n  return z(a) === r;\n};\nvar isPortal = function (a) {\n  return z(a) === d;\n};\nvar isProfiler = function (a) {\n  return z(a) === g;\n};\nvar isStrictMode = function (a) {\n  return z(a) === f;\n};\nvar isSuspense = function (a) {\n  return z(a) === p;\n};\nvar isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || \"object\" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);\n};\nvar typeOf = z;\nvar reactIs_production_min = {\n  AsyncMode: AsyncMode,\n  ConcurrentMode: ConcurrentMode,\n  ContextConsumer: ContextConsumer,\n  ContextProvider: ContextProvider,\n  Element: Element,\n  ForwardRef: ForwardRef,\n  Fragment: Fragment,\n  Lazy: Lazy,\n  Memo: Memo,\n  Portal: Portal,\n  Profiler: Profiler,\n  StrictMode: StrictMode,\n  Suspense: Suspense,\n  isAsyncMode: isAsyncMode,\n  isConcurrentMode: isConcurrentMode,\n  isContextConsumer: isContextConsumer,\n  isContextProvider: isContextProvider,\n  isElement: isElement,\n  isForwardRef: isForwardRef,\n  isFragment: isFragment,\n  isLazy: isLazy,\n  isMemo: isMemo,\n  isPortal: isPortal,\n  isProfiler: isProfiler,\n  isStrictMode: isStrictMode,\n  isSuspense: isSuspense,\n  isValidElementType: isValidElementType,\n  typeOf: typeOf\n};\n\n/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar reactIs_development = createCommonjsModule(function (module, exports) {\n  if (process.env.NODE_ENV !== \"production\") {\n    (function () {\n      // The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n      // nor polyfill, then a plain number is used for performance.\n      var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n      var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n      var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n      var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n      var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n      var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n      var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n      var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n      // (unstable) APIs that have been removed. Can we remove the symbols?\n\n      var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n      var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n      var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n      var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n      var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n      var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n      var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n      var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n      var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n      var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n      var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n      function isValidElementType(type) {\n        return typeof type === 'string' || typeof type === 'function' ||\n        // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n        type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n      }\n      function typeOf(object) {\n        if (typeof object === 'object' && object !== null) {\n          var $$typeof = object.$$typeof;\n          switch ($$typeof) {\n            case REACT_ELEMENT_TYPE:\n              var type = object.type;\n              switch (type) {\n                case REACT_ASYNC_MODE_TYPE:\n                case REACT_CONCURRENT_MODE_TYPE:\n                case REACT_FRAGMENT_TYPE:\n                case REACT_PROFILER_TYPE:\n                case REACT_STRICT_MODE_TYPE:\n                case REACT_SUSPENSE_TYPE:\n                  return type;\n                default:\n                  var $$typeofType = type && type.$$typeof;\n                  switch ($$typeofType) {\n                    case REACT_CONTEXT_TYPE:\n                    case REACT_FORWARD_REF_TYPE:\n                    case REACT_LAZY_TYPE:\n                    case REACT_MEMO_TYPE:\n                    case REACT_PROVIDER_TYPE:\n                      return $$typeofType;\n                    default:\n                      return $$typeof;\n                  }\n              }\n            case REACT_PORTAL_TYPE:\n              return $$typeof;\n          }\n        }\n        return undefined;\n      } // AsyncMode is deprecated along with isAsyncMode\n\n      var AsyncMode = REACT_ASYNC_MODE_TYPE;\n      var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n      var ContextConsumer = REACT_CONTEXT_TYPE;\n      var ContextProvider = REACT_PROVIDER_TYPE;\n      var Element = REACT_ELEMENT_TYPE;\n      var ForwardRef = REACT_FORWARD_REF_TYPE;\n      var Fragment = REACT_FRAGMENT_TYPE;\n      var Lazy = REACT_LAZY_TYPE;\n      var Memo = REACT_MEMO_TYPE;\n      var Portal = REACT_PORTAL_TYPE;\n      var Profiler = REACT_PROFILER_TYPE;\n      var StrictMode = REACT_STRICT_MODE_TYPE;\n      var Suspense = REACT_SUSPENSE_TYPE;\n      var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n      function isAsyncMode(object) {\n        {\n          if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n            hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n            console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n          }\n        }\n        return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n      }\n      function isConcurrentMode(object) {\n        return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n      }\n      function isContextConsumer(object) {\n        return typeOf(object) === REACT_CONTEXT_TYPE;\n      }\n      function isContextProvider(object) {\n        return typeOf(object) === REACT_PROVIDER_TYPE;\n      }\n      function isElement(object) {\n        return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n      }\n      function isForwardRef(object) {\n        return typeOf(object) === REACT_FORWARD_REF_TYPE;\n      }\n      function isFragment(object) {\n        return typeOf(object) === REACT_FRAGMENT_TYPE;\n      }\n      function isLazy(object) {\n        return typeOf(object) === REACT_LAZY_TYPE;\n      }\n      function isMemo(object) {\n        return typeOf(object) === REACT_MEMO_TYPE;\n      }\n      function isPortal(object) {\n        return typeOf(object) === REACT_PORTAL_TYPE;\n      }\n      function isProfiler(object) {\n        return typeOf(object) === REACT_PROFILER_TYPE;\n      }\n      function isStrictMode(object) {\n        return typeOf(object) === REACT_STRICT_MODE_TYPE;\n      }\n      function isSuspense(object) {\n        return typeOf(object) === REACT_SUSPENSE_TYPE;\n      }\n      exports.AsyncMode = AsyncMode;\n      exports.ConcurrentMode = ConcurrentMode;\n      exports.ContextConsumer = ContextConsumer;\n      exports.ContextProvider = ContextProvider;\n      exports.Element = Element;\n      exports.ForwardRef = ForwardRef;\n      exports.Fragment = Fragment;\n      exports.Lazy = Lazy;\n      exports.Memo = Memo;\n      exports.Portal = Portal;\n      exports.Profiler = Profiler;\n      exports.StrictMode = StrictMode;\n      exports.Suspense = Suspense;\n      exports.isAsyncMode = isAsyncMode;\n      exports.isConcurrentMode = isConcurrentMode;\n      exports.isContextConsumer = isContextConsumer;\n      exports.isContextProvider = isContextProvider;\n      exports.isElement = isElement;\n      exports.isForwardRef = isForwardRef;\n      exports.isFragment = isFragment;\n      exports.isLazy = isLazy;\n      exports.isMemo = isMemo;\n      exports.isPortal = isPortal;\n      exports.isProfiler = isProfiler;\n      exports.isStrictMode = isStrictMode;\n      exports.isSuspense = isSuspense;\n      exports.isValidElementType = isValidElementType;\n      exports.typeOf = typeOf;\n    })();\n  }\n});\nvar reactIs = createCommonjsModule(function (module) {\n  if (process.env.NODE_ENV === 'production') {\n    module.exports = reactIs_production_min;\n  } else {\n    module.exports = reactIs_development;\n  }\n});\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n    var keys = getOwnPropertyNames(sourceComponent);\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n  return targetComponent;\n}\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\nfunction withRequiredAuthInfo(Component, args) {\n  const displayName = `withRequiredAuthInfo(${Component.displayName || Component.name || \"Component\"})`;\n  const WithRequiredAuthInfoWrapper = props => {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n      throw new Error(\"withRequiredAuthInfo must be used within an AuthProvider or RequiredAuthProvider\");\n    }\n    const {\n      loading,\n      authInfo,\n      defaultDisplayIfLoggedOut,\n      defaultDisplayWhileLoading,\n      refreshAuthInfo,\n      tokens\n    } = context;\n    function displayLoading() {\n      if (args?.displayWhileLoading) {\n        return args.displayWhileLoading;\n      } else if (defaultDisplayWhileLoading) {\n        return defaultDisplayWhileLoading;\n      }\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n    function displayLoggedOut() {\n      if (args?.displayIfLoggedOut) {\n        return args.displayIfLoggedOut;\n      } else if (defaultDisplayIfLoggedOut) {\n        return defaultDisplayIfLoggedOut;\n      }\n      return /*#__PURE__*/React.createElement(RedirectToLogin, null);\n    }\n    if (loading) {\n      return displayLoading();\n    } else if (authInfo) {\n      const loggedInProps = {\n        ...props,\n        accessToken: authInfo.accessToken,\n        isLoggedIn: !!authInfo.accessToken,\n        orgHelper: authInfo.orgHelper,\n        accessHelper: authInfo.accessHelper,\n        user: authInfo.user,\n        userClass: authInfo.userClass,\n        isImpersonating: !!authInfo.impersonatorUserId,\n        impersonatorUserId: authInfo.impersonatorUserId,\n        refreshAuthInfo,\n        tokens,\n        accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds\n      };\n      return /*#__PURE__*/React.createElement(Component, loggedInProps);\n    } else {\n      return displayLoggedOut();\n    }\n  };\n  WithRequiredAuthInfoWrapper.displayName = displayName;\n  WithRequiredAuthInfoWrapper.WrappedComponent = Component;\n  return hoistNonReactStatics_cjs(WithRequiredAuthInfoWrapper, Component);\n}\nconst RequiredAuthWrappedComponent = withRequiredAuthInfo(_ref6 => {\n  let {\n    children\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n});\nconst RequiredAuthProvider = props => {\n  const {\n    children,\n    displayIfLoggedOut,\n    displayWhileLoading,\n    ...sharedProps\n  } = props;\n  return /*#__PURE__*/React.createElement(AuthProvider, _extends({}, sharedProps, {\n    defaultDisplayIfLoggedOut: displayIfLoggedOut,\n    defaultDisplayWhileLoading: displayWhileLoading\n  }), /*#__PURE__*/React.createElement(RequiredAuthWrappedComponent, null, children));\n};\nfunction withAuthInfo(Component, args) {\n  const displayName = `withAuthInfo(${Component.displayName || Component.name || \"Component\"})`;\n  const WithAuthInfoWrapper = props => {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n      throw new Error(\"withAuthInfo must be used within an AuthProvider or RequiredAuthProvider\");\n    }\n    const {\n      loading,\n      authInfo,\n      defaultDisplayWhileLoading,\n      refreshAuthInfo,\n      tokens\n    } = context;\n    function displayLoading() {\n      if (args?.displayWhileLoading) {\n        return args.displayWhileLoading;\n      } else if (defaultDisplayWhileLoading) {\n        return defaultDisplayWhileLoading;\n      }\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n    if (loading) {\n      return displayLoading();\n    } else if (authInfo) {\n      const loggedInProps = {\n        ...props,\n        accessToken: authInfo.accessToken,\n        isLoggedIn: !!authInfo.accessToken,\n        orgHelper: authInfo.orgHelper,\n        accessHelper: authInfo.accessHelper,\n        user: authInfo.user,\n        userClass: authInfo.userClass,\n        isImpersonating: !!authInfo.impersonatorUserId,\n        impersonatorUserId: authInfo.impersonatorUserId,\n        refreshAuthInfo,\n        tokens,\n        accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds\n      };\n      return /*#__PURE__*/React.createElement(Component, loggedInProps);\n    } else {\n      const notLoggedInProps = {\n        ...props,\n        accessToken: null,\n        isLoggedIn: false,\n        user: null,\n        userClass: null,\n        orgHelper: null,\n        accessHelper: null,\n        isImpersonating: false,\n        impersonatorUserId: null,\n        refreshAuthInfo,\n        tokens,\n        accessTokenExpiresAtSeconds: null\n      };\n      return /*#__PURE__*/React.createElement(Component, notLoggedInProps);\n    }\n  };\n  WithAuthInfoWrapper.displayName = displayName;\n  WithAuthInfoWrapper.WrappedComponent = Component;\n  return hoistNonReactStatics_cjs(WithAuthInfoWrapper, Component);\n}\nexport { AuthProvider, AuthProviderForTesting, OrgMemberInfoClass, RedirectToLogin, RedirectToSignup, RequiredAuthProvider, UserClass, loadOrgSelectionFromLocalStorage, saveOrgSelectionToLocalStorage, useAccessHelper, useActiveOrg, useAuthInfo, useHostedPageUrls, useLogoutFunction, useOrgHelper, useRedirectFunctions, withAuthInfo, withRequiredAuthInfo };","map":{"version":3,"names":["assign","target","i","arguments","length","source","key","defaultConverter","read","value","slice","replace","decodeURIComponent","write","encodeURIComponent","init","converter","defaultAttributes","set","name","attributes","document","expires","Date","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","found","e","Object","create","remove","withAttributes","withConverter","freeze","path","OrgRoleStructure","getAccessHelper$1","getAccessHelper","orgIdToOrgMemberInfo","isRole","orgId","role","orgMemberInfo","undefined","orgRoleStructure","MultiRole","userAssignedRole","userAssignedAdditionalRoles","includes","isAtLeastRole","userInheritedRolesPlusCurrentRole","hasPermission","permission","userPermissions","hasAllPermissions","permissions","every","getAccessHelperWithOrgId","getOrgHelper$1","getOrgHelper","getOrg","hasOwnProperty","getOrgIds","keys","getOrgs","values","getOrgByName","orgName","urlSafeOrgName","UserClass","constructor","userFields","orgIdToUserOrgInfo","userId","email","firstName","lastName","username","createdAt","pictureUrl","hasPassword","hasMfaEnabled","canCreateOrgs","legacyUserId","impersonatorUserId","properties","toLowerCase","getUserProperty","isImpersonating","fromJSON","json","obj","JSON","parse","OrgMemberInfoClass","stringify","console","error","orgMetadata","SingleRole","convertOrgIdToOrgMemberInfo","fetchAuthenticationInfo","authUrl","activeOrgId","queryParams","URLSearchParams","append","toString","fetch","method","credentials","headers","then","res","status","logCorsError","Promise","reject","message","ok","statusText","parseResponse","logout","text","httpResponse","authInfoWithoutUserClass","parseJsonConvertingSnakeToCamel","withExtraArgs","str","accessToken","expiresAtSeconds","emailConfirmed","mfaEnabled","lastActiveAt","authInfoWithoutExtraArgs","orgHelper","accessHelper","userClass","user","resolve","DEFAULT_RETRIES","runWithRetriesOnAnyError","fn","runWithRetriesInner","numRetriesLeft","delay","numRetriesLeftToDelay","ms","setTimeout","currentTimeSeconds","hasLocalStorage","localStorage","hasWindow","window","getLocalStorageNumber","getItem","num","parseInt","Number","isNaN","LOGGED_IN_AT_KEY","LOGGED_OUT_AT_KEY","AUTH_TOKEN_REFRESH_BEFORE_EXPIRATION_SECONDS","DEBOUNCE_DURATION_FOR_REFOCUS_SECONDS","ACTIVE_ORG_ACCESS_TOKEN_REFRESH_EXPIRATION_SECONDS","encodeBase64","encode","btoa","validateAndCleanupOptions","authOptions","URL","origin","Error","enableBackgroundTokenRefresh","createClient","clientState","initialLoadFinished","authenticationInfo","observers","accessTokenObservers","lastLoggedInAtMessage","lastLoggedOutAtMessage","refreshInterval","lastRefresh","accessTokenActiveOrgMap","notifyObservers","isLoggedIn","observer","notifyObserversOfAccessTokenChange","userJustLoggedOut","previousAccessToken","userJustLoggedIn","updateLastLoggedOutAt","loggedOutAt","setItem","String","updateLastLoggedInAt","loggedInAt","resetAccessTokenActiveOrgMap","setAuthenticationInfoAndUpdateDownstream","_clientState$authenti","forceRefreshToken","returnCached","getSignupPageUrl","options","qs","url","postSignupRedirectUrl","userSignupQueryParameters","entries","forEach","_ref","getLoginPageUrl","postLoginRedirectUrl","_ref2","getAccountPageUrl","redirectBackToUrl","getOrgPageUrl","getCreateOrgPageUrl","getSetupSAMLPageUrl","client","addLoggedInChangeObserver","loggedInChangeObserver","hasObserver","push","removeLoggedInChangeObserver","observerIndex","indexOf","splice","addAccessTokenChangeObserver","removeAccessTokenChangeObserver","getAuthenticationInfoOrNull","forceRefresh","currentTimeSecs","getAccessTokenForOrg","activeOrgAccessToken","fetchedAt","redirectToSignupPage","location","href","redirectToLoginPage","redirectToAccountPage","redirectToOrgPage","redirectToCreateOrgPage","redirectToSetupSAMLPage","redirectAfterLogout","logoutResponse","redirect_to","destroy","removeEventListener","onStorageChange","clearInterval","onOnlineOrFocus","addEventListener","setInterval","DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY","useActiveOrg","context","useContext","AuthContext","loading","authInfo","proposedActiveOrgIdOrName","activeOrgFn","saveOrgSelectionToLocalStorage","orgIdOrName","loadOrgSelectionFromLocalStorage","useClientRef","props","accessTokenChangeCounter","setAccessTokenChangeCounter","useState","clientRef","useRef","current","x","useEffect","newClient","useClientRefCallback","callback","useCallback","React","createContext","initialAuthInfoState","authInfoStateReducer","_state","action","AuthProvider","authInfoState","dispatch","useReducer","didCancel","refreshToken","_","getActiveOrgFn","warn","refreshAuthInfo","deprecatedActiveOrgFn","defaultDisplayWhileLoading","defaultDisplayIfLoggedOut","tokens","createElement","Provider","children","AuthProviderForTesting","_ref3","userInformation","getAuthInfoForTesting","activeOrgFnWithDefault","contextValue","orgMemberInfos","accessTokenWithDefault","toOrgIdToUserOrgInfo","prototype","call","useAuthInfo","accessTokenExpiresAtSeconds","useOrgHelper","useAccessHelper","useHostedPageUrls","useLogoutFunction","useRedirectFunctions","RedirectToSignup","_ref4","Fragment","RedirectToLogin","_ref5","b","Symbol","for","c","d","f","g","h","k","l","m","n","p","q","r","t","v","w","y","z","a","u","$$typeof","type","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","process","env","NODE_ENV","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","object","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","exports","module","reactIs_production_min","reactIs_development","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","displayName","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","FORWARD_REF_STATICS","render","MEMO_STATICS","compare","TYPE_STATICS","reactIs","getStatics","component","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","targetStatics","sourceStatics","descriptor","hoistNonReactStatics_cjs","withRequiredAuthInfo","Component","args","WithRequiredAuthInfoWrapper","displayLoading","displayWhileLoading","displayLoggedOut","displayIfLoggedOut","loggedInProps","WrappedComponent","RequiredAuthWrappedComponent","_ref6","RequiredAuthProvider","sharedProps","_extends","withAuthInfo","WithAuthInfoWrapper","notLoggedInProps"],"sources":["/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/node_modules/@propelauth/javascript/dist/esm/index.js","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/useActiveOrg.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/useClientRef.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/AuthContext.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/AuthContextForTesting.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/useAuthInfo.ts","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/additionalHooks.ts","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/useHostedPageUrls.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/useLogoutFunction.ts","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/hooks/useRedirectFunctions.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/node_modules/react-is/cjs/react-is.production.min.js","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/node_modules/react-is/cjs/react-is.development.js","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/node_modules/react-is/index.js","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/withRequiredAuthInfo.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/RequiredAuthProvider.tsx","/Users/violinmeiling/dev/myhealthpassport/node_modules/@propelauth/react/src/withAuthInfo.tsx"],"sourcesContent":["/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n\nconst ACTIVE_ORG_ID_COOKIE_NAME = \"active_org_id\";\n\nlet OrgRoleStructure = /*#__PURE__*/function (OrgRoleStructure) {\n  OrgRoleStructure[\"SingleRole\"] = \"single_role_in_hierarchy\";\n  OrgRoleStructure[\"MultiRole\"] = \"multi_role\";\n  return OrgRoleStructure;\n}({});\nconst setActiveOrgId = orgId => {\n  api.set(ACTIVE_ORG_ID_COOKIE_NAME, orgId, {\n    sameSite: \"lax\",\n    secure: true\n  });\n};\nconst getActiveOrgId = () => {\n  return api.get(ACTIVE_ORG_ID_COOKIE_NAME);\n};\n\nfunction getAccessHelper(orgIdToOrgMemberInfo) {\n  function isRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    if (orgMemberInfo.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return orgMemberInfo.userAssignedRole === role || orgMemberInfo.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return orgMemberInfo.userAssignedRole === role;\n    }\n  }\n  function isAtLeastRole(orgId, role) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    if (orgMemberInfo.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return orgMemberInfo.userAssignedRole === role || orgMemberInfo.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return orgMemberInfo.userInheritedRolesPlusCurrentRole.includes(role);\n    }\n  }\n  function hasPermission(orgId, permission) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return orgMemberInfo.userPermissions.includes(permission);\n  }\n  function hasAllPermissions(orgId, permissions) {\n    const orgMemberInfo = orgIdToOrgMemberInfo[orgId];\n    if (orgMemberInfo === undefined) {\n      return false;\n    }\n    return permissions.every(permission => orgMemberInfo.userPermissions.includes(permission));\n  }\n  function getAccessHelperWithOrgId(orgId) {\n    return {\n      isRole(role) {\n        return isRole(orgId, role);\n      },\n      isAtLeastRole(role) {\n        return isAtLeastRole(orgId, role);\n      },\n      hasPermission(permission) {\n        return hasPermission(orgId, permission);\n      },\n      hasAllPermissions(permissions) {\n        return hasAllPermissions(orgId, permissions);\n      }\n    };\n  }\n  return {\n    isRole,\n    isAtLeastRole,\n    hasPermission,\n    hasAllPermissions,\n    getAccessHelperWithOrgId\n  };\n}\n\nfunction getOrgHelper(orgIdToOrgMemberInfo) {\n  return {\n    getOrg(orgId) {\n      if (orgIdToOrgMemberInfo.hasOwnProperty(orgId)) {\n        return orgIdToOrgMemberInfo[orgId];\n      } else {\n        return undefined;\n      }\n    },\n    getOrgIds() {\n      return Object.keys(orgIdToOrgMemberInfo);\n    },\n    getOrgs() {\n      return Object.values(orgIdToOrgMemberInfo);\n    },\n    getOrgByName(orgName) {\n      for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n        if (orgMemberInfo.orgName === orgName || orgMemberInfo.urlSafeOrgName === orgName) {\n          return orgMemberInfo;\n        }\n      }\n      return undefined;\n    }\n  };\n}\n\nclass UserClass {\n  // Metadata about the user\n\n  // If you used our migration APIs to migrate this user from a different system,\n  // this is their original ID from that system.\n\n  constructor(userFields, orgIdToUserOrgInfo) {\n    this.userId = userFields.userId;\n    this.orgIdToUserOrgInfo = orgIdToUserOrgInfo;\n    this.email = userFields.email;\n    this.firstName = userFields.firstName;\n    this.lastName = userFields.lastName;\n    this.username = userFields.username;\n    this.createdAt = userFields.createdAt;\n    this.pictureUrl = userFields.pictureUrl;\n    this.hasPassword = userFields.hasPassword;\n    this.hasMfaEnabled = userFields.hasMfaEnabled;\n    this.canCreateOrgs = userFields.canCreateOrgs;\n    this.legacyUserId = userFields.legacyUserId;\n    this.impersonatorUserId = userFields.impersonatorUserId;\n    this.properties = userFields.properties;\n  }\n  getOrg(orgId) {\n    if (!this.orgIdToUserOrgInfo) {\n      return undefined;\n    }\n    return this.orgIdToUserOrgInfo[orgId];\n  }\n  getOrgByName(orgName) {\n    if (!this.orgIdToUserOrgInfo) {\n      return undefined;\n    }\n    const urlSafeOrgName = orgName.toLowerCase().replace(/ /g, \"-\");\n    for (const orgId in this.orgIdToUserOrgInfo) {\n      const orgMemberInfo = this.orgIdToUserOrgInfo[orgId];\n      if ((orgMemberInfo === null || orgMemberInfo === void 0 ? void 0 : orgMemberInfo.urlSafeOrgName) === urlSafeOrgName) {\n        return orgMemberInfo;\n      }\n    }\n    return undefined;\n  }\n  getUserProperty(key) {\n    if (!this.properties) {\n      return undefined;\n    }\n    return this.properties[key];\n  }\n  getOrgs() {\n    if (!this.orgIdToUserOrgInfo) {\n      return [];\n    }\n    return Object.values(this.orgIdToUserOrgInfo);\n  }\n  isImpersonating() {\n    return !!this.impersonatorUserId;\n  }\n  isRole(orgId, role) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.isRole(role);\n  }\n  isAtLeastRole(orgId, role) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.isAtLeastRole(role);\n  }\n  hasPermission(orgId, permission) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.hasPermission(permission);\n  }\n  hasAllPermissions(orgId, permissions) {\n    const orgMemberInfo = this.getOrg(orgId);\n    if (!orgMemberInfo) {\n      return false;\n    }\n    return orgMemberInfo.hasAllPermissions(permissions);\n  }\n  static fromJSON(json) {\n    const obj = JSON.parse(json);\n    const orgIdToUserOrgInfo = {};\n    for (const orgId in obj.orgIdToUserOrgInfo) {\n      orgIdToUserOrgInfo[orgId] = OrgMemberInfoClass.fromJSON(JSON.stringify(obj.orgIdToUserOrgInfo[orgId]));\n    }\n    try {\n      return new UserClass({\n        userId: obj.userId,\n        email: obj.email,\n        createdAt: obj.createdAt,\n        firstName: obj.firstName,\n        lastName: obj.lastName,\n        username: obj.username,\n        legacyUserId: obj.legacyUserId,\n        impersonatorUserId: obj.impersonatorUserId,\n        properties: obj.properties,\n        pictureUrl: obj.pictureUrl,\n        hasPassword: obj.hasPassword,\n        hasMfaEnabled: obj.hasMfaEnabled,\n        canCreateOrgs: obj.canCreateOrgs\n      }, orgIdToUserOrgInfo);\n    } catch (e) {\n      console.error(\"Unable to parse User. Make sure the JSON string is a stringified `UserClass` type.\", e);\n      throw e;\n    }\n  }\n}\nclass OrgMemberInfoClass {\n  constructor(orgId, orgName, orgMetadata, urlSafeOrgName, userAssignedRole, userInheritedRolesPlusCurrentRole, userPermissions, orgRoleStructure, userAssignedAdditionalRoles) {\n    this.orgId = orgId;\n    this.orgName = orgName;\n    this.orgMetadata = orgMetadata;\n    this.urlSafeOrgName = urlSafeOrgName;\n    this.orgRoleStructure = orgRoleStructure !== null && orgRoleStructure !== void 0 ? orgRoleStructure : OrgRoleStructure.SingleRole;\n    this.userAssignedRole = userAssignedRole;\n    this.userInheritedRolesPlusCurrentRole = userInheritedRolesPlusCurrentRole;\n    this.userPermissions = userPermissions;\n    this.userAssignedAdditionalRoles = userAssignedAdditionalRoles !== null && userAssignedAdditionalRoles !== void 0 ? userAssignedAdditionalRoles : [];\n  }\n\n  // validation methods\n  isRole(role) {\n    if (this.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return this.userAssignedRole === role || this.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return this.userAssignedRole === role;\n    }\n  }\n  isAtLeastRole(role) {\n    if (this.orgRoleStructure === OrgRoleStructure.MultiRole) {\n      return this.userAssignedRole === role || this.userAssignedAdditionalRoles.includes(role);\n    } else {\n      return this.userInheritedRolesPlusCurrentRole.includes(role);\n    }\n  }\n  hasPermission(permission) {\n    return this.userPermissions.includes(permission);\n  }\n  hasAllPermissions(permissions) {\n    return permissions.every(permission => this.hasPermission(permission));\n  }\n  static fromJSON(json) {\n    const obj = JSON.parse(json);\n    try {\n      return new OrgMemberInfoClass(obj.orgId, obj.orgName, obj.orgMetadata, obj.urlSafeOrgName, obj.userAssignedRole, obj.userInheritedRolesPlusCurrentRole, obj.userPermissions, obj.orgRoleStructure, obj.userAssignedAdditionalRoles);\n    } catch (e) {\n      console.error(\"Unable to parse UserOrgInfo. Make sure the JSON string is a stringified `UserOrgInfo` type.\", e);\n      throw e;\n    }\n  }\n}\nfunction convertOrgIdToOrgMemberInfo(orgIdToOrgMemberInfo) {\n  if (orgIdToOrgMemberInfo === undefined) {\n    return undefined;\n  }\n  const orgIdToUserOrgInfo = {};\n  for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n    orgIdToUserOrgInfo[orgMemberInfo.orgId] = new OrgMemberInfoClass(orgMemberInfo.orgId, orgMemberInfo.orgName, orgMemberInfo.orgMetadata, orgMemberInfo.urlSafeOrgName, orgMemberInfo.userAssignedRole, orgMemberInfo.userInheritedRolesPlusCurrentRole, orgMemberInfo.userPermissions, orgMemberInfo.orgRoleStructure, orgMemberInfo.userAssignedAdditionalRoles);\n  }\n  return orgIdToUserOrgInfo;\n}\n\nfunction fetchAuthenticationInfo(authUrl, activeOrgId) {\n  const queryParams = new URLSearchParams();\n  if (activeOrgId) {\n    queryParams.append(\"active_org_id\", activeOrgId);\n  }\n  let path = `${authUrl}/api/v1/refresh_token`;\n  if (queryParams.toString()) {\n    path += `?${queryParams.toString()}`;\n  }\n  return fetch(path, {\n    method: \"GET\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (res.status === 401) {\n      return null;\n    } else if (res.status === 0) {\n      logCorsError();\n      return Promise.reject({\n        status: 503,\n        message: \"Unable to process authentication response\"\n      });\n    } else if (!res.ok) {\n      return Promise.reject({\n        status: res.status,\n        message: res.statusText\n      });\n    } else {\n      return parseResponse(res);\n    }\n  });\n}\nfunction logout(authUrl) {\n  return fetch(`${authUrl}/api/v1/logout`, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (res.status === 0) {\n      logCorsError();\n      return Promise.reject({\n        status: 503,\n        message: \"Unable to process authentication response\"\n      });\n    } else if (!res.ok) {\n      console.error(\"Logout error\", res.status, res.statusText);\n      return Promise.reject({\n        status: res.status,\n        message: res.statusText\n      });\n    } else {\n      return res.json();\n    }\n  });\n}\nfunction parseResponse(res) {\n  return res.text().then(httpResponse => {\n    try {\n      const authInfoWithoutUserClass = parseJsonConvertingSnakeToCamel(httpResponse);\n      return withExtraArgs(authInfoWithoutUserClass);\n    } catch (e) {\n      console.error(\"Unable to process authentication response\", e);\n      return Promise.reject({\n        status: 500,\n        message: \"Unable to process authentication response\"\n      });\n    }\n  }, e => {\n    console.error(\"Unable to process authentication response\", e);\n    return Promise.reject({\n      status: 500,\n      message: \"Unable to process authentication response\"\n    });\n  });\n}\n\n// The API responds with snake_case, but TypeScript convention is camelCase.\n// When parsing JSON, we pass in reviver function to convert from snake_case to camelCase.\nfunction parseJsonConvertingSnakeToCamel(str) {\n  return JSON.parse(str, function (key, value) {\n    if (key === \"org_id\") {\n      this.orgId = value;\n    } else if (key === \"org_name\") {\n      this.orgName = value;\n    } else if (key === \"org_metadata\") {\n      this.orgMetadata = value;\n    } else if (key === \"url_safe_org_name\") {\n      this.urlSafeOrgName = value;\n    } else if (key === \"user_role\") {\n      this.userAssignedRole = value;\n    } else if (key === \"inherited_user_roles_plus_current_role\") {\n      this.userInheritedRolesPlusCurrentRole = value;\n    } else if (key === \"user_permissions\") {\n      this.userPermissions = value;\n    } else if (key === \"access_token\") {\n      this.accessToken = value;\n    } else if (key === \"expires_at_seconds\") {\n      this.expiresAtSeconds = value;\n    } else if (key === \"org_id_to_org_member_info\") {\n      this.orgIdToOrgMemberInfo = value;\n    } else if (key === \"user_id\") {\n      this.userId = value;\n    } else if (key === \"email_confirmed\") {\n      this.emailConfirmed = value;\n    } else if (key === \"first_name\") {\n      this.firstName = value;\n    } else if (key === \"last_name\") {\n      this.lastName = value;\n    } else if (key === \"picture_url\") {\n      this.pictureUrl = value;\n    } else if (key === \"mfa_enabled\") {\n      this.mfaEnabled = value;\n    } else if (key === \"has_password\") {\n      this.hasPassword = value;\n    } else if (key === \"can_create_orgs\") {\n      this.canCreateOrgs = value;\n    } else if (key === \"created_at\") {\n      this.createdAt = value;\n    } else if (key === \"last_active_at\") {\n      this.lastActiveAt = value;\n    } else if (key === \"legacy_user_id\") {\n      this.legacyUserId = value;\n    } else if (key === \"impersonator_user\") {\n      this.impersonatorUserId = value;\n    } else if (key === \"org_role_structure\") {\n      this.orgRoleStructure = value;\n    } else if (key === \"additional_roles\") {\n      this.userAssignedAdditionalRoles = value;\n    } else {\n      return value;\n    }\n  });\n}\nfunction withExtraArgs(authInfoWithoutExtraArgs) {\n  if (authInfoWithoutExtraArgs.orgIdToOrgMemberInfo) {\n    authInfoWithoutExtraArgs.orgHelper = getOrgHelper(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo);\n    authInfoWithoutExtraArgs.accessHelper = getAccessHelper(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo);\n  }\n  authInfoWithoutExtraArgs.userClass = new UserClass({\n    userId: authInfoWithoutExtraArgs.user.userId,\n    email: authInfoWithoutExtraArgs.user.email,\n    createdAt: authInfoWithoutExtraArgs.user.createdAt,\n    firstName: authInfoWithoutExtraArgs.user.firstName,\n    lastName: authInfoWithoutExtraArgs.user.lastName,\n    username: authInfoWithoutExtraArgs.user.username,\n    properties: authInfoWithoutExtraArgs.user.properties,\n    pictureUrl: authInfoWithoutExtraArgs.user.pictureUrl,\n    hasPassword: authInfoWithoutExtraArgs.user.hasPassword,\n    hasMfaEnabled: authInfoWithoutExtraArgs.user.mfaEnabled,\n    canCreateOrgs: authInfoWithoutExtraArgs.user.canCreateOrgs,\n    legacyUserId: authInfoWithoutExtraArgs.user.legacyUserId,\n    impersonatorUserId: authInfoWithoutExtraArgs.impersonatorUserId\n  }, convertOrgIdToOrgMemberInfo(authInfoWithoutExtraArgs.orgIdToOrgMemberInfo));\n  return Promise.resolve(authInfoWithoutExtraArgs);\n}\nfunction logCorsError() {\n  console.error(\"Request to PropelAuth failed due to a CORS error. There are a few likely causes: \\n\" + \" 1. In the Frontend Integration section of your dashboard, make sure your requests are coming either the specified Application URL or localhost with a matching port.\\n\" + \" 2. Make sure your server is hosted on HTTPS in production.\");\n}\n\nconst DEFAULT_RETRIES = 3;\nconst runWithRetriesOnAnyError = async fn => {\n  return runWithRetriesInner(fn, DEFAULT_RETRIES);\n};\nconst runWithRetriesInner = async (fn, numRetriesLeft) => {\n  try {\n    return await fn();\n  } catch (e) {\n    if (numRetriesLeft <= 0) {\n      throw e;\n    }\n    await delay(numRetriesLeftToDelay(numRetriesLeft));\n    return runWithRetriesInner(fn, numRetriesLeft - 1);\n  }\n};\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst numRetriesLeftToDelay = numRetriesLeft => {\n  // We could be fancy, but we only retry 3 times so...\n  if (numRetriesLeft >= 3) {\n    return 100;\n  } else if (numRetriesLeft === 2) {\n    return 200;\n  } else {\n    return 300;\n  }\n};\n\nfunction currentTimeSeconds() {\n  return Date.now() / 1000;\n}\nfunction hasLocalStorage() {\n  return typeof localStorage !== \"undefined\";\n}\nfunction hasWindow() {\n  return typeof window !== \"undefined\";\n}\nfunction getLocalStorageNumber(key) {\n  if (!hasLocalStorage()) {\n    return null;\n  }\n  const value = localStorage.getItem(key);\n  if (!value) {\n    return null;\n  }\n  const num = parseInt(value, 10);\n  if (Number.isNaN(num)) {\n    return null;\n  }\n  return num;\n}\n\nconst LOGGED_IN_AT_KEY = \"__PROPEL_AUTH_LOGGED_IN_AT\";\nconst LOGGED_OUT_AT_KEY = \"__PROPEL_AUTH_LOGGED_OUT_AT\";\nconst AUTH_TOKEN_REFRESH_BEFORE_EXPIRATION_SECONDS = 10 * 60;\nconst DEBOUNCE_DURATION_FOR_REFOCUS_SECONDS = 60;\nconst ACTIVE_ORG_ACCESS_TOKEN_REFRESH_EXPIRATION_SECONDS = 60 * 5;\nconst encodeBase64 = str => {\n  const encode = window ? window.btoa : btoa;\n  return encode(str);\n};\nfunction validateAndCleanupOptions(authOptions) {\n  try {\n    // This helps make sure we have a consistent URL ignoring things like trailing slashes\n    const authUrl = new URL(authOptions.authUrl);\n    authOptions.authUrl = authUrl.origin;\n  } catch (e) {\n    console.error(\"Invalid authUrl\", e);\n    throw new Error(\"Unable to initialize auth client\");\n  }\n  if (authOptions.enableBackgroundTokenRefresh === undefined) {\n    authOptions.enableBackgroundTokenRefresh = true;\n  }\n}\nfunction createClient(authOptions) {\n  validateAndCleanupOptions(authOptions);\n\n  // Internal state\n  const clientState = {\n    initialLoadFinished: false,\n    authenticationInfo: null,\n    observers: [],\n    accessTokenObservers: [],\n    lastLoggedInAtMessage: getLocalStorageNumber(LOGGED_IN_AT_KEY),\n    lastLoggedOutAtMessage: getLocalStorageNumber(LOGGED_OUT_AT_KEY),\n    authUrl: authOptions.authUrl,\n    refreshInterval: null,\n    lastRefresh: null,\n    accessTokenActiveOrgMap: {}\n  };\n\n  // Helper functions\n  function notifyObservers(isLoggedIn) {\n    for (let i = 0; i < clientState.observers.length; i++) {\n      const observer = clientState.observers[i];\n      if (observer) {\n        observer(isLoggedIn);\n      }\n    }\n  }\n  function notifyObserversOfAccessTokenChange(accessToken) {\n    for (let i = 0; i < clientState.accessTokenObservers.length; i++) {\n      const observer = clientState.accessTokenObservers[i];\n      if (observer) {\n        observer(accessToken);\n      }\n    }\n  }\n  function userJustLoggedOut(accessToken, previousAccessToken) {\n    // Edge case: the first time we go to the page, if we can't load the\n    //   auth token we should treat it as a logout event\n    return !accessToken && (previousAccessToken || !clientState.initialLoadFinished);\n  }\n  function userJustLoggedIn(accessToken, previousAccessToken) {\n    return !previousAccessToken && accessToken;\n  }\n  function updateLastLoggedOutAt() {\n    const loggedOutAt = currentTimeSeconds();\n    clientState.lastLoggedOutAtMessage = loggedOutAt;\n    if (hasLocalStorage()) {\n      localStorage.setItem(LOGGED_OUT_AT_KEY, String(loggedOutAt));\n    }\n  }\n  function updateLastLoggedInAt() {\n    const loggedInAt = currentTimeSeconds();\n    clientState.lastLoggedInAtMessage = loggedInAt;\n    if (hasLocalStorage()) {\n      localStorage.setItem(LOGGED_IN_AT_KEY, String(loggedInAt));\n    }\n  }\n\n  /**\n   * Invalidates all org's access tokens.\n   */\n  function resetAccessTokenActiveOrgMap() {\n    clientState.accessTokenActiveOrgMap = {};\n  }\n  function setAuthenticationInfoAndUpdateDownstream(authenticationInfo) {\n    var _clientState$authenti;\n    const previousAccessToken = (_clientState$authenti = clientState.authenticationInfo) === null || _clientState$authenti === void 0 ? void 0 : _clientState$authenti.accessToken;\n    clientState.authenticationInfo = authenticationInfo;\n    const accessToken = authenticationInfo === null || authenticationInfo === void 0 ? void 0 : authenticationInfo.accessToken;\n    if (userJustLoggedOut(accessToken, previousAccessToken)) {\n      notifyObservers(false);\n      updateLastLoggedOutAt();\n    } else if (userJustLoggedIn(accessToken, previousAccessToken)) {\n      notifyObservers(true);\n      updateLastLoggedInAt();\n    }\n    if (previousAccessToken !== accessToken) {\n      notifyObserversOfAccessTokenChange(accessToken);\n    }\n    resetAccessTokenActiveOrgMap();\n    clientState.lastRefresh = currentTimeSeconds();\n    clientState.initialLoadFinished = true;\n  }\n  async function forceRefreshToken(returnCached) {\n    try {\n      // Happy case, we fetch auth info and save it\n      const authenticationInfo = await runWithRetriesOnAnyError(() => fetchAuthenticationInfo(clientState.authUrl));\n      setAuthenticationInfoAndUpdateDownstream(authenticationInfo);\n      return authenticationInfo;\n    } catch (e) {\n      // If there was an error, we sometimes still want to return the value we have cached\n      //   (e.g. if we were prefetching), so in those cases we swallow the exception\n      if (returnCached) {\n        return clientState.authenticationInfo;\n      } else {\n        setAuthenticationInfoAndUpdateDownstream(null);\n        throw e;\n      }\n    }\n  }\n  const getSignupPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/signup`;\n    if (options) {\n      const {\n        postSignupRedirectUrl,\n        userSignupQueryParameters\n      } = options;\n      if (postSignupRedirectUrl) {\n        qs.set(\"rt\", encodeBase64(postSignupRedirectUrl));\n      }\n      if (userSignupQueryParameters) {\n        Object.entries(userSignupQueryParameters).forEach(([key, value]) => {\n          qs.set(key, value);\n        });\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getLoginPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/login`;\n    if (options) {\n      const {\n        postLoginRedirectUrl,\n        userSignupQueryParameters\n      } = options;\n      if (postLoginRedirectUrl) {\n        qs.set(\"rt\", encodeBase64(postLoginRedirectUrl));\n      }\n      if (userSignupQueryParameters) {\n        Object.entries(userSignupQueryParameters).forEach(([key, value]) => {\n          qs.set(key, value);\n        });\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getAccountPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/account`;\n    if (options) {\n      const {\n        redirectBackToUrl\n      } = options;\n      if (redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getOrgPageUrl = (orgId, options) => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/org`;\n    if (orgId) {\n      qs.set(\"id\", orgId);\n    }\n    if (options) {\n      if (options.redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(options.redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getCreateOrgPageUrl = options => {\n    let qs = new URLSearchParams();\n    let url = `${clientState.authUrl}/create_org`;\n    if (options) {\n      const {\n        redirectBackToUrl\n      } = options;\n      if (redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(redirectBackToUrl));\n      }\n    }\n    if (qs.toString()) {\n      url += `?${qs.toString()}`;\n    }\n    return url;\n  };\n  const getSetupSAMLPageUrl = (orgId, options) => {\n    let qs = new URLSearchParams();\n    if (options) {\n      if (options.redirectBackToUrl) {\n        qs.set(\"rt\", encodeBase64(options.redirectBackToUrl));\n      }\n    }\n    qs.set(\"id\", orgId);\n    return `${clientState.authUrl}/saml?${qs.toString()}`;\n  };\n  const client = {\n    addLoggedInChangeObserver(loggedInChangeObserver) {\n      const hasObserver = clientState.observers.includes(loggedInChangeObserver);\n      if (hasObserver) {\n        console.error(\"Observer has been attached already.\");\n      } else if (!loggedInChangeObserver) {\n        console.error(\"Cannot add a null observer\");\n      } else {\n        clientState.observers.push(loggedInChangeObserver);\n      }\n    },\n    removeLoggedInChangeObserver(loggedInChangeObserver) {\n      const observerIndex = clientState.observers.indexOf(loggedInChangeObserver);\n      if (observerIndex === -1) {\n        console.error(\"Cannot find observer to remove\");\n      } else {\n        clientState.observers.splice(observerIndex, 1);\n      }\n    },\n    addAccessTokenChangeObserver(observer) {\n      const hasObserver = clientState.accessTokenObservers.includes(observer);\n      if (hasObserver) {\n        console.error(\"Observer has been attached already.\");\n      } else if (!observer) {\n        console.error(\"Cannot add a null observer\");\n      } else {\n        clientState.accessTokenObservers.push(observer);\n      }\n    },\n    removeAccessTokenChangeObserver(observer) {\n      const observerIndex = clientState.accessTokenObservers.indexOf(observer);\n      if (observerIndex === -1) {\n        console.error(\"Cannot find observer to remove\");\n      } else {\n        clientState.accessTokenObservers.splice(observerIndex, 1);\n      }\n    },\n    async getAuthenticationInfoOrNull(forceRefresh) {\n      const currentTimeSecs = currentTimeSeconds();\n      if (forceRefresh) {\n        return await forceRefreshToken(false);\n      } else if (!clientState.authenticationInfo) {\n        return await forceRefreshToken(false);\n      } else if (currentTimeSecs + AUTH_TOKEN_REFRESH_BEFORE_EXPIRATION_SECONDS > clientState.authenticationInfo.expiresAtSeconds) {\n        // Small edge case: If we were being proactive\n        //   and the auth information hasn't expired yet, swallow any exceptions\n        const returnCached = currentTimeSecs < clientState.authenticationInfo.expiresAtSeconds;\n        return await forceRefreshToken(returnCached);\n      } else {\n        return clientState.authenticationInfo;\n      }\n    },\n    async getAccessTokenForOrg(orgId) {\n      // First, check if there is a valid access token for the org ID in the\n      // valid time frame.\n      const currentTimeSecs = currentTimeSeconds();\n      const activeOrgAccessToken = clientState.accessTokenActiveOrgMap[orgId];\n      if (!!activeOrgAccessToken) {\n        if (currentTimeSecs < activeOrgAccessToken.fetchedAt + ACTIVE_ORG_ACCESS_TOKEN_REFRESH_EXPIRATION_SECONDS) {\n          return {\n            accessToken: activeOrgAccessToken.accessToken,\n            error: undefined\n          };\n        }\n      }\n      // Fetch the access token for the org ID and update.\n      try {\n        const authenticationInfo = await runWithRetriesOnAnyError(() => fetchAuthenticationInfo(clientState.authUrl, orgId));\n        if (!authenticationInfo) {\n          // Only null if 401 unauthorized.\n          return {\n            error: \"user_not_in_org\",\n            accessToken: null\n          };\n        }\n        const {\n          accessToken\n        } = authenticationInfo;\n        clientState.accessTokenActiveOrgMap[orgId] = {\n          accessToken,\n          fetchedAt: currentTimeSecs\n        };\n        return {\n          accessToken,\n          error: undefined\n        };\n      } catch (e) {\n        return {\n          error: \"unexpected_error\",\n          accessToken: null\n        };\n      }\n    },\n    getSignupPageUrl(options) {\n      return getSignupPageUrl(options);\n    },\n    getLoginPageUrl(options) {\n      return getLoginPageUrl(options);\n    },\n    getAccountPageUrl(options) {\n      return getAccountPageUrl(options);\n    },\n    getOrgPageUrl(orgId, options) {\n      return getOrgPageUrl(orgId, options);\n    },\n    getCreateOrgPageUrl(options) {\n      return getCreateOrgPageUrl(options);\n    },\n    getSetupSAMLPageUrl(orgId, options) {\n      return getSetupSAMLPageUrl(orgId, options);\n    },\n    redirectToSignupPage(options) {\n      window.location.href = getSignupPageUrl(options);\n    },\n    redirectToLoginPage(options) {\n      window.location.href = getLoginPageUrl(options);\n    },\n    redirectToAccountPage(options) {\n      window.location.href = getAccountPageUrl(options);\n    },\n    redirectToOrgPage(orgId, options) {\n      window.location.href = getOrgPageUrl(orgId, options);\n    },\n    redirectToCreateOrgPage(options) {\n      window.location.href = getCreateOrgPageUrl(options);\n    },\n    redirectToSetupSAMLPage(orgId, options) {\n      window.location.href = getSetupSAMLPageUrl(orgId, options);\n    },\n    async logout(redirectAfterLogout) {\n      const logoutResponse = await logout(clientState.authUrl);\n      setAuthenticationInfoAndUpdateDownstream(null);\n      if (redirectAfterLogout) {\n        window.location.href = logoutResponse.redirect_to;\n      }\n    },\n    destroy() {\n      clientState.observers = [];\n      clientState.accessTokenObservers = [];\n      window.removeEventListener(\"storage\", onStorageChange);\n      if (clientState.refreshInterval) {\n        clearInterval(clientState.refreshInterval);\n      }\n    }\n  };\n  const onStorageChange = async function () {\n    // If localStorage isn't available, nothing to do here.\n    // This usually happens in frameworks that have some SSR components\n    if (!hasLocalStorage()) {\n      return;\n    }\n    const loggedOutAt = getLocalStorageNumber(LOGGED_OUT_AT_KEY);\n    const loggedInAt = getLocalStorageNumber(LOGGED_IN_AT_KEY);\n\n    // If we've detected a logout event after the last one our client is aware of, trigger a refresh\n    if (loggedOutAt && (!clientState.lastLoggedOutAtMessage || loggedOutAt > clientState.lastLoggedOutAtMessage)) {\n      clientState.lastLoggedOutAtMessage = loggedOutAt;\n      if (clientState.authenticationInfo) {\n        await forceRefreshToken(true);\n      }\n    }\n\n    // If we've detected a login event after the last one our client is aware of, trigger a refresh\n    if (loggedInAt && (!clientState.lastLoggedInAtMessage || loggedInAt > clientState.lastLoggedInAtMessage)) {\n      clientState.lastLoggedInAtMessage = loggedInAt;\n      if (!clientState.authenticationInfo) {\n        await forceRefreshToken(true);\n      }\n    }\n  };\n\n  // If we were offline or on a different tab, when we return, refetch auth info\n  // Some browsers trigger focus more often than we'd like, so we'll debounce a little here as well\n  const onOnlineOrFocus = async function () {\n    if (clientState.lastRefresh && currentTimeSeconds() > clientState.lastRefresh + DEBOUNCE_DURATION_FOR_REFOCUS_SECONDS) {\n      await forceRefreshToken(true);\n    } else {\n      await client.getAuthenticationInfoOrNull();\n    }\n  };\n  if (hasWindow()) {\n    window.addEventListener(\"storage\", onStorageChange);\n    window.addEventListener(\"online\", onOnlineOrFocus);\n    window.addEventListener(\"focus\", onOnlineOrFocus);\n    if (authOptions.enableBackgroundTokenRefresh) {\n      client.getAuthenticationInfoOrNull();\n      clientState.refreshInterval = window.setInterval(client.getAuthenticationInfoOrNull, 60000);\n    }\n  }\n  return client;\n}\n\nexport { ACTIVE_ORG_ID_COOKIE_NAME, OrgMemberInfoClass, UserClass, createClient, getActiveOrgId, setActiveOrgId };\n//# sourceMappingURL=index.js.map\n","import { useContext } from \"react\"\nimport { AuthContext } from \"../AuthContext\"\n\nconst DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY = \"__last_selected_org\"\n\n/**\n * @deprecated This hook is deprecated and no longer supported.\n */\nexport function useActiveOrg() {\n    const context = useContext(AuthContext)\n    if (context === undefined) {\n        throw new Error(\"useActiveOrg must be used within an AuthProvider or RequiredAuthProvider\")\n    }\n\n    if (context.loading || !context.authInfo || !context.authInfo.orgHelper) {\n        return null\n    }\n\n    const proposedActiveOrgIdOrName = context.activeOrgFn()\n    if (!proposedActiveOrgIdOrName) {\n        return null\n    }\n\n    const orgHelper = context.authInfo.orgHelper\n    return orgHelper.getOrg(proposedActiveOrgIdOrName) || orgHelper.getOrgByName(proposedActiveOrgIdOrName)\n}\n\nexport function saveOrgSelectionToLocalStorage(orgIdOrName: string) {\n    if (localStorage) {\n        localStorage.setItem(DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY, orgIdOrName)\n    }\n}\n\nexport function loadOrgSelectionFromLocalStorage(): string | null {\n    if (localStorage) {\n        return localStorage.getItem(DEPRECATED_ORG_SELECTION_LOCAL_STORAGE_KEY)\n    }\n    return null\n}\n","import { createClient, IAuthClient } from \"@propelauth/javascript\"\nimport { MutableRefObject, useCallback, useEffect, useRef, useState } from \"react\"\n\ntype ClientRef = {\n    authUrl: string\n    client: IAuthClient\n}\n\nexport const useClientRef = (props: { authUrl: string }) => {\n    const [accessTokenChangeCounter, setAccessTokenChangeCounter] = useState(0)\n    const { authUrl } = props\n\n    // Use a ref to store the client so that it doesn't get recreated on every render\n    const clientRef = useRef<ClientRef | null>(null)\n    if (clientRef.current === null) {\n        const client = createClient({ authUrl, enableBackgroundTokenRefresh: true })\n        client.addAccessTokenChangeObserver(() => setAccessTokenChangeCounter((x) => x + 1))\n        clientRef.current = { authUrl, client }\n    }\n\n    // If the authUrl changes, destroy the old client and create a new one\n    useEffect(() => {\n        if (clientRef.current === null) {\n            return\n        } else if (clientRef.current.authUrl === authUrl) {\n            return\n        } else {\n            clientRef.current.client.destroy()\n\n            const newClient = createClient({ authUrl, enableBackgroundTokenRefresh: true })\n            newClient.addAccessTokenChangeObserver(() => setAccessTokenChangeCounter((x) => x + 1))\n            clientRef.current = { authUrl, client: newClient }\n        }\n    }, [authUrl])\n\n    return { clientRef, accessTokenChangeCounter }\n}\n\nexport const useClientRefCallback = <I extends unknown[], O>(\n    clientRef: MutableRefObject<ClientRef | null>,\n    callback: (client: IAuthClient) => (...inputs: I) => O\n): ((...inputs: I) => O) => {\n    return useCallback(\n        (...inputs: I) => {\n            const client = clientRef.current?.client\n            if (!client) {\n                throw new Error(\"Client is not initialized\")\n            }\n            return callback(client)(...inputs)\n        },\n        [callback]\n    )\n}\n","import {\n    AccessTokenForActiveOrg,\n    AuthenticationInfo,\n    RedirectToAccountOptions,\n    RedirectToCreateOrgOptions,\n    RedirectToLoginOptions,\n    RedirectToOrgPageOptions,\n    RedirectToSetupSAMLPageOptions,\n    RedirectToSignupOptions,\n} from \"@propelauth/javascript\"\nimport React, { useCallback, useEffect, useReducer } from \"react\"\nimport { loadOrgSelectionFromLocalStorage } from \"./hooks/useActiveOrg\"\nimport { useClientRef, useClientRefCallback } from \"./useClientRef\"\n\nexport interface Tokens {\n    getAccessTokenForOrg: (orgId: string) => Promise<AccessTokenForActiveOrg>\n}\n\nexport interface InternalAuthState {\n    loading: boolean\n    authInfo: AuthenticationInfo | null\n\n    logout: (redirectOnLogout: boolean) => Promise<void>\n    activeOrgFn: () => string | null\n\n    redirectToLoginPage: (options?: RedirectToLoginOptions) => void\n    redirectToSignupPage: (options?: RedirectToSignupOptions) => void\n    redirectToAccountPage: (options?: RedirectToAccountOptions) => void\n    redirectToOrgPage: (orgId?: string, options?: RedirectToOrgPageOptions) => void\n    redirectToCreateOrgPage: (options?: RedirectToCreateOrgOptions) => void\n    redirectToSetupSAMLPage: (orgId: string, options?: RedirectToSetupSAMLPageOptions) => void\n\n    getSignupPageUrl(options?: RedirectToSignupOptions): string\n    getLoginPageUrl(options?: RedirectToLoginOptions): string\n    getAccountPageUrl(options?: RedirectToAccountOptions): string\n    getOrgPageUrl(orgId?: string, options?: RedirectToOrgPageOptions): string\n    getCreateOrgPageUrl(options?: RedirectToCreateOrgOptions): string\n    getSetupSAMLPageUrl(orgId: string, options?: RedirectToSetupSAMLPageOptions): string\n    tokens: Tokens\n    refreshAuthInfo: () => Promise<void>\n    defaultDisplayWhileLoading?: React.ReactElement\n    defaultDisplayIfLoggedOut?: React.ReactElement\n}\n\nexport type AuthProviderProps = {\n    authUrl: string\n    defaultDisplayWhileLoading?: React.ReactElement\n    defaultDisplayIfLoggedOut?: React.ReactElement\n    /**\n     * getActiveOrgFn is deprecated. Use `useActiveOrgV2` instead.\n     */\n    getActiveOrgFn?: () => string | null\n    children?: React.ReactNode\n}\n\nexport interface RequiredAuthProviderProps\n    extends Omit<AuthProviderProps, \"defaultDisplayWhileLoading\" | \"defaultDisplayIfLoggedOut\"> {\n    displayWhileLoading?: React.ReactElement\n    displayIfLoggedOut?: React.ReactElement\n}\n\nexport const AuthContext = React.createContext<InternalAuthState | undefined>(undefined)\n\ntype AuthInfoState = {\n    loading: boolean\n    authInfo: AuthenticationInfo | null\n}\n\nconst initialAuthInfoState: AuthInfoState = {\n    loading: true,\n    authInfo: null,\n}\n\ntype AuthInfoStateAction = {\n    authInfo: AuthenticationInfo | null\n}\n\nfunction authInfoStateReducer(_state: AuthInfoState, action: AuthInfoStateAction): AuthInfoState {\n    if (!action.authInfo) {\n        return {\n            loading: false,\n            authInfo: action.authInfo,\n        }\n    } else if (_state.loading) {\n        return {\n            loading: false,\n            authInfo: action.authInfo,\n        }\n    } else if (_state.authInfo && _state.authInfo.accessToken !== action.authInfo.accessToken) {\n        return {\n            loading: false,\n            authInfo: action.authInfo,\n        }\n    } else {\n        return _state\n    }\n}\n\nexport const AuthProvider = (props: AuthProviderProps) => {\n    const [authInfoState, dispatch] = useReducer(authInfoStateReducer, initialAuthInfoState)\n    const { clientRef, accessTokenChangeCounter } = useClientRef({ authUrl: props.authUrl })\n\n    // Refresh the token when the user has logged in or out\n    useEffect(() => {\n        let didCancel = false\n\n        async function refreshToken() {\n            const client = clientRef.current?.client\n            if (!client) {\n                return\n            }\n\n            try {\n                const authInfo = await client.getAuthenticationInfoOrNull()\n                if (!didCancel) {\n                    dispatch({ authInfo })\n                }\n            } catch (_) {\n                // Important errors are logged in the client library\n            }\n        }\n\n        refreshToken()\n        return () => {\n            didCancel = true\n        }\n    }, [accessTokenChangeCounter])\n\n    // Deprecation warning\n    useEffect(() => {\n        if (props.getActiveOrgFn) {\n            console.warn(\"The `getActiveOrgFn` prop is deprecated.\")\n        }\n    }, [])\n\n    const logout = useClientRefCallback(clientRef, (client) => client.logout)\n    const redirectToLoginPage = useClientRefCallback(clientRef, (client) => client.redirectToLoginPage)\n    const redirectToSignupPage = useClientRefCallback(clientRef, (client) => client.redirectToSignupPage)\n    const redirectToAccountPage = useClientRefCallback(clientRef, (client) => client.redirectToAccountPage)\n    const redirectToOrgPage = useClientRefCallback(clientRef, (client) => client.redirectToOrgPage)\n    const redirectToCreateOrgPage = useClientRefCallback(clientRef, (client) => client.redirectToCreateOrgPage)\n    const redirectToSetupSAMLPage = useClientRefCallback(clientRef, (client) => client.redirectToSetupSAMLPage)\n\n    const getLoginPageUrl = useClientRefCallback(clientRef, (client) => client.getLoginPageUrl)\n    const getSignupPageUrl = useClientRefCallback(clientRef, (client) => client.getSignupPageUrl)\n    const getAccountPageUrl = useClientRefCallback(clientRef, (client) => client.getAccountPageUrl)\n    const getOrgPageUrl = useClientRefCallback(clientRef, (client) => client.getOrgPageUrl)\n    const getCreateOrgPageUrl = useClientRefCallback(clientRef, (client) => client.getCreateOrgPageUrl)\n    const getSetupSAMLPageUrl = useClientRefCallback(clientRef, (client) => client.getSetupSAMLPageUrl)\n\n    const getAccessTokenForOrg = useClientRefCallback(clientRef, (client) => client.getAccessTokenForOrg)\n\n    const refreshAuthInfo = useCallback(async () => {\n        if (clientRef.current === null) {\n            return\n        }\n\n        const client = clientRef.current.client\n        const authInfo = await client.getAuthenticationInfoOrNull(true)\n        dispatch({ authInfo })\n    }, [dispatch])\n\n    // TODO: Remove this, as both `getActiveOrgFn` and `loadOrgSelectionFromLocalStorage` are deprecated.\n    const deprecatedActiveOrgFn = props.getActiveOrgFn || loadOrgSelectionFromLocalStorage\n\n    const { defaultDisplayWhileLoading, defaultDisplayIfLoggedOut } = props\n    const value: InternalAuthState = {\n        loading: authInfoState.loading,\n        authInfo: authInfoState.authInfo,\n        logout,\n        defaultDisplayWhileLoading,\n        defaultDisplayIfLoggedOut,\n        redirectToLoginPage,\n        redirectToSignupPage,\n        redirectToAccountPage,\n        redirectToOrgPage,\n        redirectToCreateOrgPage,\n        redirectToSetupSAMLPage,\n        getLoginPageUrl,\n        activeOrgFn: deprecatedActiveOrgFn,\n        getSignupPageUrl,\n        getAccountPageUrl,\n        getOrgPageUrl,\n        getCreateOrgPageUrl,\n        getSetupSAMLPageUrl,\n        refreshAuthInfo,\n        tokens: {\n            getAccessTokenForOrg,\n        },\n    }\n    return <AuthContext.Provider value={value}>{props.children}</AuthContext.Provider>\n}\n","import {\n    AccessHelper,\n    AccessHelperWithOrg,\n    AuthenticationInfo,\n    OrgHelper,\n    OrgIdToOrgMemberInfo,\n    OrgIdToOrgMemberInfoClass,\n    OrgMemberInfo,\n    OrgMemberInfoClass,\n    User,\n    UserClass,\n} from \"@propelauth/javascript\"\nimport React from \"react\"\nimport { AuthContext, InternalAuthState } from \"./AuthContext\"\n\n// User information that we will hard code within the AuthProvider\nexport type UserInformationForTesting = {\n    user: User\n    orgMemberInfos: OrgMemberInfo[]\n    accessToken?: string\n}\n\nexport type AuthProviderForTestingProps = {\n    loading?: boolean\n    userInformation?: UserInformationForTesting\n    activeOrgFn?: () => string | null\n    children?: React.ReactNode\n}\n\n/**\n * A version of the AuthProvider specifically used for testing. It won't make any external requests, but will\n * instead set up the AuthProvider to act as if the information provided was returned from the API.\n */\nexport const AuthProviderForTesting = ({\n    loading,\n    userInformation,\n    activeOrgFn,\n    children,\n}: AuthProviderForTestingProps) => {\n    const authInfo = getAuthInfoForTesting(userInformation)\n    const activeOrgFnWithDefault = activeOrgFn ? activeOrgFn : () => null\n    const contextValue: InternalAuthState = {\n        loading: !!loading,\n        authInfo,\n        logout: () => Promise.resolve(),\n        redirectToLoginPage: () => {},\n        redirectToSignupPage: () => {},\n        redirectToAccountPage: () => {},\n        redirectToOrgPage: () => {},\n        redirectToCreateOrgPage: () => {},\n        redirectToSetupSAMLPage: () => {},\n        getLoginPageUrl: () => \"\",\n        getSignupPageUrl: () => \"\",\n        getAccountPageUrl: () => \"\",\n        getOrgPageUrl: () => \"\",\n        getCreateOrgPageUrl: () => \"\",\n        getSetupSAMLPageUrl: () => \"\",\n        activeOrgFn: activeOrgFnWithDefault,\n        refreshAuthInfo: () => Promise.resolve(),\n        tokens: {\n            getAccessTokenForOrg: () =>\n                Promise.resolve({\n                    error: undefined,\n                    accessToken: \"ACCESS_TOKEN\",\n                }),\n        },\n    }\n\n    return <AuthContext.Provider value={contextValue}>{children}</AuthContext.Provider>\n}\n\nfunction getAuthInfoForTesting(userInformation?: UserInformationForTesting): AuthenticationInfo | null {\n    if (!userInformation) {\n        return null\n    }\n\n    const orgIdToOrgMemberInfo: { [orgId: string]: OrgMemberInfo } = {}\n    for (const orgMemberInfo of userInformation.orgMemberInfos) {\n        orgIdToOrgMemberInfo[orgMemberInfo.orgId] = orgMemberInfo\n    }\n\n    const accessTokenWithDefault =\n        userInformation.accessToken === undefined ? \"PLACEHOLDER_ACCESS_TOKEN\" : userInformation.accessToken\n\n    return {\n        accessToken: accessTokenWithDefault,\n        expiresAtSeconds: 1701596820,\n        orgHelper: getOrgHelper(orgIdToOrgMemberInfo),\n        accessHelper: getAccessHelper(orgIdToOrgMemberInfo),\n        orgIdToOrgMemberInfo: orgIdToOrgMemberInfo,\n        user: userInformation.user,\n        userClass: new UserClass(userInformation.user, toOrgIdToUserOrgInfo(orgIdToOrgMemberInfo)),\n    }\n}\n\nfunction toOrgIdToUserOrgInfo(orgIdToOrgMemberInfo: OrgIdToOrgMemberInfo): OrgIdToOrgMemberInfoClass {\n    const orgIdToUserOrgInfo: OrgIdToOrgMemberInfoClass = {}\n    for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n        orgIdToUserOrgInfo[orgMemberInfo.orgId] = new OrgMemberInfoClass(\n            orgMemberInfo.orgId,\n            orgMemberInfo.orgName,\n            {},\n            orgMemberInfo.urlSafeOrgName,\n            orgMemberInfo.userAssignedRole,\n            orgMemberInfo.userInheritedRolesPlusCurrentRole,\n            orgMemberInfo.userPermissions\n        )\n    }\n    return orgIdToUserOrgInfo\n}\n\n// These helpers come from @propelauth/javascript, down the road we may want to export them from that library\n//   instead of copying\nfunction getOrgHelper(orgIdToOrgMemberInfo: OrgIdToOrgMemberInfo): OrgHelper {\n    return {\n        getOrg(orgId: string): OrgMemberInfo | undefined {\n            if (Object.prototype.hasOwnProperty.call(orgIdToOrgMemberInfo, orgId)) {\n                return orgIdToOrgMemberInfo[orgId]\n            } else {\n                return undefined\n            }\n        },\n        getOrgIds(): string[] {\n            return Object.keys(orgIdToOrgMemberInfo)\n        },\n        getOrgs(): OrgMemberInfo[] {\n            return Object.values(orgIdToOrgMemberInfo)\n        },\n        getOrgByName(orgName: string): OrgMemberInfo | undefined {\n            for (const orgMemberInfo of Object.values(orgIdToOrgMemberInfo)) {\n                if (orgMemberInfo.orgName === orgName || orgMemberInfo.urlSafeOrgName === orgName) {\n                    return orgMemberInfo\n                }\n            }\n            return undefined\n        },\n    }\n}\n\nfunction getAccessHelper(orgIdToOrgMemberInfo: OrgIdToOrgMemberInfo): AccessHelper {\n    function isRole(orgId: string, role: string): boolean {\n        const orgMemberInfo = orgIdToOrgMemberInfo[orgId]\n        if (orgMemberInfo === undefined) {\n            return false\n        }\n        return orgMemberInfo.userAssignedRole === role\n    }\n\n    function isAtLeastRole(orgId: string, role: string): boolean {\n        const orgMemberInfo = orgIdToOrgMemberInfo[orgId]\n        if (orgMemberInfo === undefined) {\n            return false\n        }\n        return orgMemberInfo.userInheritedRolesPlusCurrentRole.includes(role)\n    }\n\n    function hasPermission(orgId: string, permission: string): boolean {\n        const orgMemberInfo = orgIdToOrgMemberInfo[orgId]\n        if (orgMemberInfo === undefined) {\n            return false\n        }\n        return orgMemberInfo.userPermissions.includes(permission)\n    }\n\n    function hasAllPermissions(orgId: string, permissions: string[]): boolean {\n        const orgMemberInfo = orgIdToOrgMemberInfo[orgId]\n        if (orgMemberInfo === undefined) {\n            return false\n        }\n        return permissions.every((permission) => orgMemberInfo.userPermissions.includes(permission))\n    }\n\n    function getAccessHelperWithOrgId(orgId: string): AccessHelperWithOrg {\n        return {\n            isRole(role: string): boolean {\n                return isRole(orgId, role)\n            },\n            isAtLeastRole(role: string): boolean {\n                return isAtLeastRole(orgId, role)\n            },\n            hasPermission(permission: string): boolean {\n                return hasPermission(orgId, permission)\n            },\n            hasAllPermissions(permissions: string[]): boolean {\n                return hasAllPermissions(orgId, permissions)\n            },\n        }\n    }\n\n    return {\n        isRole,\n        isAtLeastRole,\n        hasPermission,\n        hasAllPermissions,\n        getAccessHelperWithOrgId,\n    }\n}\n","import { AccessHelper, OrgHelper, User, UserClass } from \"@propelauth/javascript\"\nimport { useContext } from \"react\"\nimport { AuthContext, Tokens } from \"../AuthContext\"\n\nexport type UseAuthInfoLoading = {\n    loading: true\n    isLoggedIn: undefined\n    accessToken: undefined\n    user: undefined\n    userClass: undefined\n    orgHelper: undefined\n    accessHelper: undefined\n    isImpersonating: undefined\n    impersonatorUserId: undefined\n    refreshAuthInfo: () => Promise<void>\n    tokens: Tokens\n    accessTokenExpiresAtSeconds: undefined\n}\n\nexport type UseAuthInfoLoggedInProps = {\n    loading: false\n    isLoggedIn: true\n    accessToken: string\n    user: User\n    userClass: UserClass\n    orgHelper: OrgHelper\n    accessHelper: AccessHelper\n    isImpersonating: boolean\n    impersonatorUserId?: string\n    refreshAuthInfo: () => Promise<void>\n    tokens: Tokens\n    accessTokenExpiresAtSeconds: number\n}\n\nexport type UseAuthInfoNotLoggedInProps = {\n    loading: false\n    isLoggedIn: false\n    accessToken: null\n    user: null\n    userClass: null\n    orgHelper: null\n    accessHelper: null\n    isImpersonating: false\n    impersonatorUserId: undefined\n    refreshAuthInfo: () => Promise<void>\n    tokens: Tokens\n    accessTokenExpiresAtSeconds: undefined\n}\n\nexport type UseAuthInfoProps = UseAuthInfoLoading | UseAuthInfoLoggedInProps | UseAuthInfoNotLoggedInProps\n\nexport function useAuthInfo(): UseAuthInfoProps {\n    const context = useContext(AuthContext)\n    if (context === undefined) {\n        throw new Error(\"useAuthInfo must be used within an AuthProvider or RequiredAuthProvider\")\n    }\n\n    const { loading, authInfo, refreshAuthInfo, tokens } = context\n    if (loading) {\n        return {\n            loading: true,\n            isLoggedIn: undefined,\n            accessToken: undefined,\n            orgHelper: undefined,\n            accessHelper: undefined,\n            user: undefined,\n            userClass: undefined,\n            isImpersonating: undefined,\n            impersonatorUserId: undefined,\n            refreshAuthInfo,\n            tokens,\n            accessTokenExpiresAtSeconds: undefined,\n        }\n    } else if (authInfo && authInfo.accessToken) {\n        return {\n            loading: false,\n            isLoggedIn: true,\n            accessToken: authInfo.accessToken,\n            orgHelper: authInfo.orgHelper,\n            accessHelper: authInfo.accessHelper,\n            user: authInfo.user,\n            userClass: authInfo.userClass,\n            isImpersonating: !!authInfo.impersonatorUserId,\n            impersonatorUserId: authInfo.impersonatorUserId,\n            refreshAuthInfo,\n            tokens,\n            accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds,\n        }\n    }\n    return {\n        loading: false,\n        isLoggedIn: false,\n        accessToken: null,\n        user: null,\n        userClass: null,\n        orgHelper: null,\n        accessHelper: null,\n        isImpersonating: false,\n        impersonatorUserId: undefined,\n        refreshAuthInfo,\n        tokens,\n        accessTokenExpiresAtSeconds: undefined,\n    }\n}\n","import { AccessHelper, OrgHelper } from \"@propelauth/javascript\"\nimport { useAuthInfo } from \"./useAuthInfo\"\n\nexport type UseOrgHelperLoading = {\n    loading: true\n    orgHelper: null\n}\n\nexport type UseOrgHelperLoaded = {\n    loading: false\n    orgHelper: OrgHelper | null\n}\n\nexport type UseOrgHelper = UseOrgHelperLoading | UseOrgHelperLoaded\n\nexport function useOrgHelper(): UseOrgHelper {\n    const authInfo = useAuthInfo()\n\n    if (authInfo.loading) {\n        return {\n            loading: true,\n            orgHelper: null,\n        }\n    } else if (authInfo.isLoggedIn) {\n        return {\n            loading: false,\n            orgHelper: authInfo.orgHelper,\n        }\n    } else {\n        return {\n            loading: false,\n            orgHelper: null,\n        }\n    }\n}\n\nexport type UseAccessHelperLoading = {\n    loading: true\n    accessHelper: null\n}\n\nexport type UseAccessHelperLoaded = {\n    loading: false\n    accessHelper: AccessHelper | null\n}\n\nexport type UseAccessHelper = UseAccessHelperLoading | UseAccessHelperLoaded\n\nexport function useAccessHelper(): UseAccessHelper {\n    const authInfo = useAuthInfo()\n\n    if (authInfo.loading) {\n        return {\n            loading: true,\n            accessHelper: null,\n        }\n    } else if (authInfo.isLoggedIn) {\n        return {\n            loading: false,\n            accessHelper: authInfo.accessHelper,\n        }\n    } else {\n        return {\n            loading: false,\n            accessHelper: null,\n        }\n    }\n}\n","import { useContext } from \"react\"\nimport { AuthContext } from \"../AuthContext\"\n\nexport function useHostedPageUrls() {\n    const context = useContext(AuthContext)\n    if (context === undefined) {\n        throw new Error(\"useHostedPageUrls must be used within an AuthProvider or RequiredAuthProvider\")\n    }\n    const {\n        getLoginPageUrl,\n        getSignupPageUrl,\n        getAccountPageUrl,\n        getOrgPageUrl,\n        getCreateOrgPageUrl,\n        getSetupSAMLPageUrl,\n    } = context\n    return {\n        getLoginPageUrl,\n        getSignupPageUrl,\n        getAccountPageUrl,\n        getOrgPageUrl,\n        getCreateOrgPageUrl,\n        getSetupSAMLPageUrl,\n    }\n}\n","import { useContext } from \"react\"\nimport { AuthContext } from \"../AuthContext\"\n\nexport function useLogoutFunction() {\n    const context = useContext(AuthContext)\n    if (context === undefined) {\n        throw new Error(\"useLogoutFunction must be used within an AuthProvider or RequiredAuthProvider\")\n    }\n    const { logout } = context\n    return logout\n}\n","import React, { useContext, useEffect } from \"react\"\nimport { AuthContext } from \"../AuthContext\"\n\nexport function useRedirectFunctions() {\n    const context = useContext(AuthContext)\n    if (context === undefined) {\n        throw new Error(\"useRedirectFunctions must be used within an AuthProvider or RequiredAuthProvider\")\n    }\n    const {\n        redirectToAccountPage,\n        redirectToSignupPage,\n        redirectToLoginPage,\n        redirectToOrgPage,\n        redirectToCreateOrgPage,\n        redirectToSetupSAMLPage,\n    } = context\n    return {\n        redirectToSignupPage,\n        redirectToLoginPage,\n        redirectToAccountPage,\n        redirectToOrgPage,\n        redirectToCreateOrgPage,\n        redirectToSetupSAMLPage,\n    }\n}\n\nexport interface RedirectProps {\n    children?: React.ReactNode\n}\n\nexport interface RedirectToSignupProps extends RedirectProps {\n    postSignupRedirectUrl?: string\n    userSignupQueryParameters?: Record<string, string>\n}\n\nexport function RedirectToSignup({\n    children,\n    postSignupRedirectUrl,\n    userSignupQueryParameters,\n}: RedirectToSignupProps) {\n    const { redirectToSignupPage } = useRedirectFunctions()\n\n    useEffect(() => redirectToSignupPage({ postSignupRedirectUrl, userSignupQueryParameters }), [])\n\n    return <>{children}</>\n}\n\nexport interface RedirectToLoginProps extends RedirectProps {\n    postLoginRedirectUrl?: string\n}\n\nexport function RedirectToLogin({ children, postLoginRedirectUrl }: RedirectToLoginProps) {\n    const { redirectToLoginPage } = useRedirectFunctions()\n    useEffect(() => {\n        if (postLoginRedirectUrl) {\n            redirectToLoginPage({ postLoginRedirectUrl })\n        } else {\n            redirectToLoginPage()\n        }\n    }, [])\n    return <>{children}</>\n}\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import hoistNonReactStatics from \"hoist-non-react-statics\"\nimport React, { useContext } from \"react\"\nimport { Subtract } from \"utility-types\"\nimport { AuthContext } from \"./AuthContext\"\nimport { RedirectToLogin } from \"./hooks/useRedirectFunctions\"\nimport { WithLoggedInAuthInfoProps } from \"./withAuthInfo\"\n\nexport interface WithRequiredAuthInfoArgs {\n    displayWhileLoading?: React.ReactElement\n    displayIfLoggedOut?: React.ReactElement\n}\n\nexport function withRequiredAuthInfo<P extends WithLoggedInAuthInfoProps>(\n    Component: React.ComponentType<P>,\n    args?: WithRequiredAuthInfoArgs\n): React.ComponentType<Subtract<P, WithLoggedInAuthInfoProps>> {\n    const displayName = `withRequiredAuthInfo(${Component.displayName || Component.name || \"Component\"})`\n\n    const WithRequiredAuthInfoWrapper = (props: Subtract<P, WithLoggedInAuthInfoProps>) => {\n        const context = useContext(AuthContext)\n        if (context === undefined) {\n            throw new Error(\"withRequiredAuthInfo must be used within an AuthProvider or RequiredAuthProvider\")\n        }\n\n        const { loading, authInfo, defaultDisplayIfLoggedOut, defaultDisplayWhileLoading, refreshAuthInfo, tokens } =\n            context\n\n        function displayLoading() {\n            if (args?.displayWhileLoading) {\n                return args.displayWhileLoading\n            } else if (defaultDisplayWhileLoading) {\n                return defaultDisplayWhileLoading\n            }\n            return <React.Fragment />\n        }\n\n        function displayLoggedOut() {\n            if (args?.displayIfLoggedOut) {\n                return args.displayIfLoggedOut\n            } else if (defaultDisplayIfLoggedOut) {\n                return defaultDisplayIfLoggedOut\n            }\n            return <RedirectToLogin />\n        }\n\n        if (loading) {\n            return displayLoading()\n        } else if (authInfo) {\n            const loggedInProps: P = {\n                ...(props as P),\n                accessToken: authInfo.accessToken,\n                isLoggedIn: !!authInfo.accessToken,\n                orgHelper: authInfo.orgHelper,\n                accessHelper: authInfo.accessHelper,\n                user: authInfo.user,\n                userClass: authInfo.userClass,\n                isImpersonating: !!authInfo.impersonatorUserId,\n                impersonatorUserId: authInfo.impersonatorUserId,\n                refreshAuthInfo,\n                tokens,\n                accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds,\n            }\n            return <Component {...loggedInProps} />\n        } else {\n            return displayLoggedOut()\n        }\n    }\n    WithRequiredAuthInfoWrapper.displayName = displayName\n    WithRequiredAuthInfoWrapper.WrappedComponent = Component\n\n    return hoistNonReactStatics(WithRequiredAuthInfoWrapper, Component)\n}\n","import React from \"react\"\nimport { AuthProvider, RequiredAuthProviderProps } from \"./AuthContext\"\nimport { WithLoggedInAuthInfoProps } from \"./withAuthInfo\"\nimport { withRequiredAuthInfo } from \"./withRequiredAuthInfo\"\n\nconst RequiredAuthWrappedComponent = withRequiredAuthInfo(\n    ({ children }: { children: React.ReactNode } & WithLoggedInAuthInfoProps) => <>{children}</>\n)\n\nexport const RequiredAuthProvider = (props: RequiredAuthProviderProps) => {\n    const { children, displayIfLoggedOut, displayWhileLoading, ...sharedProps } = props\n\n    return (\n        <AuthProvider\n            {...sharedProps}\n            defaultDisplayIfLoggedOut={displayIfLoggedOut}\n            defaultDisplayWhileLoading={displayWhileLoading}\n        >\n            <RequiredAuthWrappedComponent>{children}</RequiredAuthWrappedComponent>\n        </AuthProvider>\n    )\n}\n","import { AccessHelper, OrgHelper, User, UserClass } from \"@propelauth/javascript\"\nimport hoistNonReactStatics from \"hoist-non-react-statics\"\nimport React, { useContext } from \"react\"\nimport { Subtract } from \"utility-types\"\nimport { AuthContext, Tokens } from \"./AuthContext\"\n\nexport type WithLoggedInAuthInfoProps = {\n    isLoggedIn: true\n    accessToken: string\n    user: User\n    userClass: UserClass\n    orgHelper: OrgHelper\n    accessHelper: AccessHelper\n    isImpersonating: boolean\n    impersonatorUserId?: string\n    refreshAuthInfo: () => Promise<void>\n    tokens: Tokens\n    accessTokenExpiresAtSeconds: number\n}\n\nexport type WithNotLoggedInAuthInfoProps = {\n    isLoggedIn: false\n    accessToken: null\n    user: null\n    userClass: null\n    orgHelper: null\n    accessHelper: null\n    isImpersonating: false\n    impersonatorUserId: null\n    refreshAuthInfo: () => Promise<void>\n    tokens: Tokens\n    accessTokenExpiresAtSeconds: null\n}\n\nexport type WithAuthInfoProps = WithLoggedInAuthInfoProps | WithNotLoggedInAuthInfoProps\n\nexport interface WithAuthInfoArgs {\n    displayWhileLoading?: React.ReactElement\n}\n\nexport function withAuthInfo<P extends WithAuthInfoProps>(\n    Component: React.ComponentType<P>,\n    args?: WithAuthInfoArgs\n): React.ComponentType<Subtract<P, WithAuthInfoProps>> {\n    const displayName = `withAuthInfo(${Component.displayName || Component.name || \"Component\"})`\n\n    const WithAuthInfoWrapper = (props: Subtract<P, WithAuthInfoProps>) => {\n        const context = useContext(AuthContext)\n        if (context === undefined) {\n            throw new Error(\"withAuthInfo must be used within an AuthProvider or RequiredAuthProvider\")\n        }\n\n        const { loading, authInfo, defaultDisplayWhileLoading, refreshAuthInfo, tokens } = context\n\n        function displayLoading() {\n            if (args?.displayWhileLoading) {\n                return args.displayWhileLoading\n            } else if (defaultDisplayWhileLoading) {\n                return defaultDisplayWhileLoading\n            }\n            return <React.Fragment />\n        }\n\n        if (loading) {\n            return displayLoading()\n        } else if (authInfo) {\n            const loggedInProps: P = {\n                ...(props as P),\n                accessToken: authInfo.accessToken,\n                isLoggedIn: !!authInfo.accessToken,\n                orgHelper: authInfo.orgHelper,\n                accessHelper: authInfo.accessHelper,\n                user: authInfo.user,\n                userClass: authInfo.userClass,\n                isImpersonating: !!authInfo.impersonatorUserId,\n                impersonatorUserId: authInfo.impersonatorUserId,\n                refreshAuthInfo,\n                tokens,\n                accessTokenExpiresAtSeconds: authInfo.expiresAtSeconds,\n            }\n            return <Component {...loggedInProps} />\n        } else {\n            const notLoggedInProps: P = {\n                ...(props as P),\n                accessToken: null,\n                isLoggedIn: false,\n                user: null,\n                userClass: null,\n                orgHelper: null,\n                accessHelper: null,\n                isImpersonating: false,\n                impersonatorUserId: null,\n                refreshAuthInfo,\n                tokens,\n                accessTokenExpiresAtSeconds: null,\n            }\n            return <Component {...notLoggedInProps} />\n        }\n    }\n    WithAuthInfoWrapper.displayName = displayName\n    WithAuthInfoWrapper.WrappedComponent = Component\n\n    return hoistNonReactStatics(WithAuthInfoWrapper, Component)\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}